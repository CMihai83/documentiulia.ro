generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Organization {
  id                 String                    @id @default(cuid())
  name               String
  slug               String                    @unique
  cui                String?                   @unique
  regCom             String?
  address            String?
  city               String?
  county             String?
  country            String                    @default("Romania")
  postalCode         String?
  phone              String?
  email              String?
  website            String?
  bankName           String?
  bankAccount        String?
  tier               Tier                      @default(FREE)
  maxUsers           Int                       @default(1)
  maxInvoices        Int                       @default(10)
  maxDocuments       Int                       @default(50)
  defaultVatRate     Decimal                   @default(21) @db.Decimal(5, 2)
  defaultCurrency    String                    @default("RON")
  invoicePrefix      String?
  invoiceCounter     Int                       @default(0)
  isActive           Boolean                   @default(true)
  activatedAt        DateTime?
  deactivatedAt      DateTime?
  spvConnected       Boolean                   @default(false)
  sagaConnected      Boolean                   @default(false)
  sagaAccessToken    String?
  sagaRefreshToken   String?
  sagaTokenExpiresAt DateTime?
  sagaTokenScope     String?
  settings           Json?                     @default("{}")
  createdAt          DateTime                  @default(now())
  updatedAt          DateTime                  @updatedAt
  auditLogs          AuditLog[]
  contracts          Contract[]
  documents          Document[]
  employees          Employee[]
  invoices           Invoice[]
  ocrTemplates       OCRTemplate[]
  integrations       OrganizationIntegration[]
  invitations        OrganizationInvitation[]
  members            OrganizationMember[]
  partners           Partner[]
  products           Product[]
  recurringInvoices  RecurringInvoice[]
  saftReports        SAFTReport[]
  spvMessages        SpvMessage[]
  spvSubmissions     SpvSubmission[]
  spvTokens          SpvToken[]
  vatReports         VATReport[]

  @@index([slug])
  @@index([cui])
  @@index([isActive])
}

model OrganizationMember {
  id                 String       @id @default(cuid())
  userId             String
  organizationId     String
  role               OrgRole      @default(MEMBER)
  canManageUsers     Boolean      @default(false)
  canManageInvoices  Boolean      @default(true)
  canManageDocuments Boolean      @default(true)
  canViewReports     Boolean      @default(true)
  canSubmitAnaf      Boolean      @default(false)
  canExportData      Boolean      @default(true)
  isActive           Boolean      @default(true)
  joinedAt           DateTime     @default(now())
  invitedBy          String?
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  organization       Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  user               User         @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, organizationId])
  @@index([userId])
  @@index([organizationId])
  @@index([role])
}

model OrganizationInvitation {
  id             String           @id @default(cuid())
  organizationId String
  email          String
  role           OrgRole          @default(MEMBER)
  token          String           @unique @default(cuid())
  invitedBy      String
  expiresAt      DateTime
  status         InvitationStatus @default(PENDING)
  acceptedAt     DateTime?
  createdAt      DateTime         @default(now())
  organization   Organization     @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  @@unique([organizationId, email])
  @@index([token])
  @@index([status])
}

model User {
  id                      String                @id @default(cuid())
  clerkId                 String?               @unique
  email                   String                @unique
  name                    String?
  company                 String?
  cui                     String?
  tier                    Tier                  @default(FREE)
  language                String                @default("ro")
  createdAt               DateTime              @default(now())
  updatedAt               DateTime              @updatedAt
  password                String?
  role                    UserRole              @default(USER)
  activeOrganizationId    String?
  address                 String?
  emailVerified           Boolean               @default(false)
  emailVerifiedAt         DateTime?
  mfaBackupCodes          String[]
  mfaEnabled              Boolean               @default(false)
  mfaEnabledAt            DateTime?
  mfaSecret               String?
  notificationPreferences Json                  @default("{\"email\": {\"systemAlerts\": true, \"overdueAlerts\": true, \"weeklyReports\": true, \"invoiceReminders\": true, \"complianceDeadlines\": true}}")
  aiQueries               AIQuery[]
  auditLogs               AuditLog[]
  contracts               Contract[]
  dsrRequests             DSRRequest[]
  dashboardPreferences    DashboardPreferences?
  documents               Document[]
  employees               Employee[]
  invoices                Invoice[]
  organizationMemberships OrganizationMember[]
  pfaRegistrations        PfaRegistration[]
  products                Product[]
  saftReports             SAFTReport[]
  srlRegistrations        SrlRegistration[]
  syncLogs                SyncLog[]
  vatReports              VATReport[]
  vatD300Declarations     VatD300Declaration[]
  vatD394Declarations     VatD394Declaration[]

  @@index([clerkId])
  @@index([email])
  @@index([activeOrganizationId])
}

model DashboardPreferences {
  id                String   @id @default(cuid())
  userId            String   @unique
  enabledModules    Json     @default("[\"dashboard\", \"analytics\", \"invoices\", \"finance\", \"crm\", \"hr\"]")
  moduleOrder       Json     @default("[]")
  collapsedSections Json     @default("[]")
  sidebarCollapsed  Boolean  @default(false)
  compactMode       Boolean  @default(false)
  darkMode          Boolean  @default(false)
  dashboardWidgets  Json     @default("[\"overview\", \"cashFlow\", \"vatChart\", \"recentInvoices\", \"alerts\"]")
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
}

model Document {
  id              String           @id @default(cuid())
  userId          String
  filename        String
  fileUrl         String
  fileType        String
  fileSize        Int
  status          DocStatus        @default(PENDING)
  ocrData         Json?
  extractedText   String?
  confidence      Float?
  createdAt       DateTime         @default(now())
  processedAt     DateTime?
  organizationId  String?
  contract        Contract?
  organization    Organization?    @relation(fields: [organizationId], references: [id])
  user            User             @relation(fields: [userId], references: [id])
  extractedFields ExtractedField[]
  invoice         Invoice?

  @@index([userId])
  @@index([organizationId])
  @@index([status])
}

model Invoice {
  id                 String            @id @default(cuid())
  userId             String
  documentId         String?           @unique
  invoiceNumber      String
  invoiceDate        DateTime
  dueDate            DateTime?
  type               InvoiceType       @default(RECEIVED)
  status             InvoiceStatus     @default(DRAFT)
  partnerName        String
  partnerCui         String?
  partnerAddress     String?
  netAmount          Decimal           @db.Decimal(12, 2)
  vatRate            Decimal           @db.Decimal(5, 2)
  vatAmount          Decimal           @db.Decimal(12, 2)
  grossAmount        Decimal           @db.Decimal(12, 2)
  currency           String            @default("RON")
  efacturaId         String?
  efacturaStatus     String?
  spvSubmitted       Boolean           @default(false)
  spvSubmittedAt     DateTime?
  sagaSynced         Boolean           @default(false)
  sagaId             String?
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  baseCurrency       String            @default("RON")
  baseGrossAmount    Decimal?          @db.Decimal(12, 2)
  baseNetAmount      Decimal?          @db.Decimal(12, 2)
  baseVatAmount      Decimal?          @db.Decimal(12, 2)
  exchangeRate       Decimal?          @db.Decimal(12, 6)
  externalRef        String?
  isRecurring        Boolean           @default(false)
  metadata           Json?
  notes              String?
  organizationId     String?
  paidAmount         Decimal           @default(0) @db.Decimal(12, 2)
  paidAt             DateTime?
  partnerId          String?
  paymentStatus      PaymentStatus     @default(UNPAID)
  recurringInvoiceId String?
  document           Document?         @relation(fields: [documentId], references: [id])
  organization       Organization?     @relation(fields: [organizationId], references: [id])
  partner            Partner?          @relation(fields: [partnerId], references: [id])
  recurringInvoice   RecurringInvoice? @relation("RecurringInvoiceInvoices", fields: [recurringInvoiceId], references: [id])
  user               User              @relation(fields: [userId], references: [id])
  items              InvoiceItem[]
  payments           Payment[]

  @@index([userId])
  @@index([organizationId])
  @@index([invoiceDate])
  @@index([type])
  @@index([paymentStatus])
  @@index([userId, type, invoiceDate])
  @@index([userId, invoiceDate, type])
  @@index([userId, type, partnerName])
  @@index([userId, paymentStatus, invoiceDate])
  @@index([currency, userId, invoiceDate])
}

model Payment {
  id          String              @id @default(cuid())
  invoiceId   String
  amount      Decimal             @db.Decimal(12, 2)
  currency    String              @default("RON")
  paymentDate DateTime            @default(now())
  method      PaymentMethod
  reference   String?
  description String?
  bankName    String?
  bankAccount String?
  status      PaymentRecordStatus @default(COMPLETED)
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  invoice     Invoice             @relation(fields: [invoiceId], references: [id], onDelete: Cascade)

  @@index([invoiceId])
  @@index([paymentDate])
  @@index([method])
  @@index([paymentDate, invoiceId])
  @@index([status, paymentDate])
}

model VATReport {
  id             String        @id @default(cuid())
  userId         String
  period         String
  vatCollected   Decimal       @db.Decimal(12, 2)
  vatDeductible  Decimal       @db.Decimal(12, 2)
  vatPayable     Decimal       @db.Decimal(12, 2)
  vatRate        Decimal       @default(21) @db.Decimal(5, 2)
  status         ReportStatus  @default(DRAFT)
  submittedAt    DateTime?
  anafRef        String?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  organizationId String?
  organization   Organization? @relation(fields: [organizationId], references: [id])
  user           User          @relation(fields: [userId], references: [id])

  @@unique([userId, period])
  @@index([userId])
  @@index([organizationId])
  @@index([period, userId])
}

model SAFTReport {
  id               String        @id @default(cuid())
  userId           String
  period           String
  reportType       String        @default("D406")
  xmlUrl           String?
  xmlSize          Int?
  validated        Boolean       @default(false)
  validatedAt      DateTime?
  validationResult Json?
  status           ReportStatus  @default(DRAFT)
  submittedAt      DateTime?
  spvRef           String?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  organizationId   String?
  organization     Organization? @relation(fields: [organizationId], references: [id])
  user             User          @relation(fields: [userId], references: [id])

  @@unique([userId, period])
  @@index([userId])
  @@index([organizationId])
  @@index([status, period])
  @@index([userId, status, submittedAt])
  @@index([organizationId, period, status])
  @@index([reportType, status])
}

model VatD300Declaration {
  id                             String    @id @default(cuid())
  userId                         String
  cui                            String
  companyName                    String
  month                          Int
  year                           Int
  outputTaxableBase19            Decimal   @db.Decimal(14, 2)
  outputVat19                    Decimal   @db.Decimal(14, 2)
  outputTaxableBase9             Decimal   @db.Decimal(14, 2)
  outputVat9                     Decimal   @db.Decimal(14, 2)
  outputTaxableBase5             Decimal   @db.Decimal(14, 2)
  outputVat5                     Decimal   @db.Decimal(14, 2)
  exemptWithDeduction            Decimal   @db.Decimal(14, 2)
  exemptWithoutDeduction         Decimal   @db.Decimal(14, 2)
  reverseChargeBase              Decimal   @db.Decimal(14, 2)
  intraCommunityDeliveries       Decimal   @db.Decimal(14, 2)
  exports                        Decimal   @db.Decimal(14, 2)
  inputVat19                     Decimal   @db.Decimal(14, 2)
  inputVat9                      Decimal   @db.Decimal(14, 2)
  inputVat5                      Decimal   @db.Decimal(14, 2)
  importVat                      Decimal   @db.Decimal(14, 2)
  intraCommunityAcquisitionsBase Decimal   @db.Decimal(14, 2)
  intraCommunityAcquisitionsVat  Decimal   @db.Decimal(14, 2)
  reverseChargeInputVat          Decimal   @db.Decimal(14, 2)
  totalOutputVat                 Decimal   @db.Decimal(14, 2)
  totalInputVat                  Decimal   @db.Decimal(14, 2)
  vatPayable                     Decimal   @db.Decimal(14, 2)
  intraCommunityTransactions     Json?
  notes                          String?
  legalRepresentativeName        String?
  legalRepresentativeCnp         String?
  status                         String    @default("DRAFT")
  submittedAt                    DateTime?
  anafReferenceNumber            String?
  createdAt                      DateTime  @default(now())
  updatedAt                      DateTime  @updatedAt
  user                           User      @relation(fields: [userId], references: [id])

  @@unique([userId, cui, month, year])
  @@index([userId])
  @@index([cui])
  @@index([year, month])
  @@index([status])
}

model VatD394Declaration {
  id                               String    @id @default(cuid())
  userId                           String
  cui                              String
  companyName                      String
  quarter                          Int
  year                             Int
  acquisitions                     Json?
  totalAcquisitionsBase            Decimal   @db.Decimal(14, 2)
  totalAcquisitionsVat             Decimal   @db.Decimal(14, 2)
  deliveries                       Json?
  totalDeliveriesValue             Decimal   @db.Decimal(14, 2)
  servicesProvided                 Json?
  totalServicesProvidedValue       Decimal   @db.Decimal(14, 2)
  servicesReceived                 Json?
  totalServicesReceivedBase        Decimal   @db.Decimal(14, 2)
  totalServicesReceivedVat         Decimal   @db.Decimal(14, 2)
  triangularSimplification         Decimal?  @db.Decimal(14, 2)
  triangularDeliveries             Decimal?  @db.Decimal(14, 2)
  triangularAcquisitions           Decimal?  @db.Decimal(14, 2)
  acquisitionsCorrectionsBase      Decimal?  @db.Decimal(14, 2)
  acquisitionsCorrectionsVat       Decimal?  @db.Decimal(14, 2)
  deliveriesCorrectionsValue       Decimal?  @db.Decimal(14, 2)
  servicesProvidedCorrectionsValue Decimal?  @db.Decimal(14, 2)
  servicesReceivedCorrectionsBase  Decimal?  @db.Decimal(14, 2)
  servicesReceivedCorrectionsVat   Decimal?  @db.Decimal(14, 2)
  viesValidated                    Boolean   @default(false)
  viesValidationDate               String?
  invalidVatIds                    String[]  @default([])
  monthlyD300Ids                   String[]  @default([])
  isReconciled                     Boolean   @default(false)
  notes                            String?
  isAmendment                      Boolean   @default(false)
  originalDeclarationNumber        String?
  legalRepresentativeName          String?
  legalRepresentativeCnp           String?
  status                           String    @default("DRAFT")
  submittedAt                      DateTime?
  anafReferenceNumber              String?
  createdAt                        DateTime  @default(now())
  updatedAt                        DateTime  @updatedAt
  user                             User      @relation(fields: [userId], references: [id])

  @@unique([userId, cui, quarter, year])
  @@index([userId])
  @@index([cui])
  @@index([year, quarter])
  @@index([status])
}

model SrlRegistration {
  id                  String            @id @default(cuid())
  userId              String
  status              String
  companyType         String
  companyName         String
  alternativeName1    String?
  alternativeName2    String?
  county              String
  city                String
  sector              String?
  street              String
  streetNumber        String
  building            String?
  staircase           String?
  floor               String?
  apartment           String?
  postalCode          String
  shareCapital        Decimal           @db.Decimal(14, 2)
  totalShares         Int
  shareNominalValue   Decimal           @db.Decimal(14, 2)
  businessPurpose     String
  companyDuration     Int               @default(99)
  contactEmail        String
  contactPhone        String
  notes               String?
  registrationFee     Decimal           @db.Decimal(10, 2)
  onrcFee             Decimal           @db.Decimal(10, 2)
  serviceFee          Decimal           @db.Decimal(10, 2)
  cui                 String?
  registrationNumber  String?
  onrcReferenceNumber String?
  submittedAt         DateTime?
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  administrators      Administrator[]
  activities          CompanyActivity[]
  shareholders        Shareholder[]
  user                User              @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([status])
  @@index([cui])
}

model Shareholder {
  id             String          @id @default(cuid())
  registrationId String
  type           String
  name           String
  cnp            String?
  cui            String?
  address        String
  email          String
  phone          String?
  shares         Int
  contribution   Decimal         @db.Decimal(14, 2)
  percentage     Decimal         @db.Decimal(5, 2)
  createdAt      DateTime        @default(now())
  registration   SrlRegistration @relation(fields: [registrationId], references: [id], onDelete: Cascade)

  @@index([registrationId])
}

model Administrator {
  id                  String          @id @default(cuid())
  registrationId      String
  name                String
  cnp                 String
  address             String
  email               String
  phone               String?
  isSoleAdministrator Boolean         @default(false)
  createdAt           DateTime        @default(now())
  registration        SrlRegistration @relation(fields: [registrationId], references: [id], onDelete: Cascade)

  @@index([registrationId])
}

model CompanyActivity {
  id             String          @id @default(cuid())
  registrationId String
  caenCode       String
  description    String
  isPrimary      Boolean         @default(false)
  createdAt      DateTime        @default(now())
  registration   SrlRegistration @relation(fields: [registrationId], references: [id], onDelete: Cascade)

  @@index([registrationId])
  @@index([caenCode])
}

model PfaRegistration {
  id                   String        @id @default(cuid())
  userId               String
  status               String
  fullName             String
  cnp                  String        @unique
  idCardNumber         String
  idCardIssuedBy       String
  idCardIssuedDate     DateTime
  county               String
  city                 String
  sector               String?
  street               String
  streetNumber         String
  building             String?
  staircase            String?
  floor                String?
  apartment            String?
  postalCode           String
  email                String
  phone                String
  tradeName            String?
  activityType         String
  activityDescription  String
  businessAddress      String?
  needsCommercialSpace Boolean       @default(false)
  expectedEmployees    Int           @default(0)
  notes                String?
  registrationFee      Decimal       @db.Decimal(10, 2)
  anafFee              Decimal       @db.Decimal(10, 2)
  serviceFee           Decimal       @db.Decimal(10, 2)
  cui                  String?
  anafReferenceNumber  String?
  submittedAt          DateTime?
  createdAt            DateTime      @default(now())
  updatedAt            DateTime      @updatedAt
  activities           PfaActivity[]
  user                 User          @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([status])
  @@index([cnp])
  @@index([cui])
}

model PfaActivity {
  id             String          @id @default(cuid())
  registrationId String
  caenCode       String
  description    String
  isPrimary      Boolean         @default(false)
  createdAt      DateTime        @default(now())
  registration   PfaRegistration @relation(fields: [registrationId], references: [id], onDelete: Cascade)

  @@index([registrationId])
}

model Employee {
  id                 String              @id @default(cuid())
  userId             String
  firstName          String
  lastName           String
  email              String
  cnp                String?
  position           String
  department         String?
  hireDate           DateTime
  salary             Decimal             @db.Decimal(10, 2)
  contractType       String              @default("FULL_TIME")
  status             EmployeeStatus      @default(ACTIVE)
  createdAt          DateTime            @default(now())
  updatedAt          DateTime            @updatedAt
  organizationId     String?
  driverRoutes       DeliveryRoute[]     @relation("DriverRoutes")
  organization       Organization?       @relation(fields: [organizationId], references: [id])
  user               User                @relation(fields: [userId], references: [id])
  hrContracts        HRContract[]
  hrForms            HRForm[]
  hseIncidents       HSEIncident[]
  hseSafetyTrainings HSESafetyTraining[]
  payrolls           Payroll[]
  timesheets         Timesheet[]
  assignedVehicles   Vehicle[]           @relation("AssignedVehicle")

  @@index([userId])
  @@index([organizationId])
}

model Payroll {
  id            String        @id @default(cuid())
  employeeId    String
  period        String
  grossSalary   Decimal       @db.Decimal(10, 2)
  netSalary     Decimal       @db.Decimal(10, 2)
  taxes         Decimal       @db.Decimal(10, 2)
  contributions Decimal       @db.Decimal(10, 2)
  status        PayrollStatus @default(PENDING)
  paidAt        DateTime?
  createdAt     DateTime      @default(now())
  employee      Employee      @relation(fields: [employeeId], references: [id])

  @@unique([employeeId, period])
  @@index([employeeId])
}

model Timesheet {
  id           String          @id @default(cuid())
  employeeId   String
  date         DateTime
  startTime    DateTime
  endTime      DateTime
  breakMinutes Int             @default(0)
  workedHours  Float           @default(0)
  routeId      String?
  notes        String?
  status       TimesheetStatus @default(PENDING)
  approvedAt   DateTime?
  approvedBy   String?
  createdAt    DateTime        @default(now())
  updatedAt    DateTime        @updatedAt
  employee     Employee        @relation(fields: [employeeId], references: [id])

  @@index([employeeId])
  @@index([date])
  @@index([status])
}

model Partner {
  id                String             @id @default(cuid())
  userId            String
  organizationId    String?
  name              String
  cui               String?
  regCom            String?
  address           String?
  city              String?
  county            String?
  country           String             @default("Romania")
  postalCode        String?
  email             String?
  phone             String?
  contactPerson     String?
  bankName          String?
  bankAccount       String?
  type              PartnerType        @default(CUSTOMER)
  isActive          Boolean            @default(true)
  invoiceCount      Int                @default(0)
  totalRevenue      Decimal            @default(0) @db.Decimal(14, 2)
  createdAt         DateTime           @default(now())
  updatedAt         DateTime           @updatedAt
  contracts         Contract[]
  invoices          Invoice[]
  organization      Organization?      @relation(fields: [organizationId], references: [id])
  recurringInvoices RecurringInvoice[]

  @@unique([userId, cui])
  @@index([userId])
  @@index([organizationId])
  @@index([type])
  @@index([name])
}

model AIQuery {
  id        String   @id @default(cuid())
  userId    String
  question  String
  answer    String
  model     String   @default("grok")
  tokens    Int?
  latencyMs Int?
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([createdAt])
}

model AuditLog {
  id             String        @id @default(cuid())
  userId         String
  action         String
  entity         String
  entityId       String?
  details        Json?
  ipAddress      String?
  createdAt      DateTime      @default(now())
  organizationId String?
  organization   Organization? @relation(fields: [organizationId], references: [id])
  user           User          @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([organizationId])
  @@index([action])
  @@index([createdAt])
  @@index([userId, entity, createdAt])
  @@index([entity, entityId])
  @@index([organizationId, action, createdAt])
}

model Consent {
  id        String   @id @default(cuid())
  userId    String
  purpose   String
  granted   Boolean
  ipAddress String?
  userAgent String?
  timestamp DateTime @default(now())

  @@unique([userId, purpose])
  @@index([userId])
  @@index([purpose])
}

model DSRRequest {
  id                String    @id @default(cuid())
  userId            String
  type              String
  status            String    @default("PENDING")
  reason            String?
  additionalDetails String?
  ipAddress         String?
  adminNotes        String?
  rejectionReason   String?
  processedBy       String?
  processedAt       DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  user              User      @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([status])
}

model OCRTemplate {
  id              String           @id @default(cuid())
  name            String
  description     String?
  documentType    DocumentType
  language        String           @default("ro")
  zones           Json
  aiPrompt        String?
  matchPatterns   Json?
  createdById     String?
  isSystem        Boolean          @default(false)
  usageCount      Int              @default(0)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  organizationId  String?
  extractedFields ExtractedField[]
  organization    Organization?    @relation(fields: [organizationId], references: [id])

  @@index([organizationId])
  @@index([documentType])
  @@index([language])
}

model ExtractedField {
  id                String       @id @default(cuid())
  documentId        String
  templateId        String?
  invoiceNumber     String?
  invoiceDate       DateTime?
  dueDate           DateTime?
  partnerName       String?
  partnerCui        String?
  partnerAddress    String?
  netAmount         Decimal?     @db.Decimal(12, 2)
  vatRate           Decimal?     @db.Decimal(5, 2)
  vatAmount         Decimal?     @db.Decimal(12, 2)
  grossAmount       Decimal?     @db.Decimal(12, 2)
  currency          String?
  receiptNumber     String?
  cashRegisterNo    String?
  contractNumber    String?
  parties           Json?
  effectiveDate     DateTime?
  confidences       Json
  overallConfidence Float
  rawText           String?
  boundingBoxes     Json?
  wasManuallyEdited Boolean      @default(false)
  editedFields      Json?
  createdAt         DateTime     @default(now())
  document          Document     @relation(fields: [documentId], references: [id], onDelete: Cascade)
  template          OCRTemplate? @relation(fields: [templateId], references: [id])

  @@index([documentId])
  @@index([templateId])
  @@index([overallConfidence])
}

model Epic {
  id          String     @id @default(cuid())
  code        String     @unique
  name        String
  description String?
  color       String     @default("#3B82F6")
  icon        String?
  module      ModuleType
  priority    Int        @default(0)
  status      EpicStatus @default(PLANNED)
  progress    Int        @default(0)
  startDate   DateTime?
  targetDate  DateTime?
  completedAt DateTime?
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt
  sprints     Sprint[]
  tasks       Task[]

  @@index([module])
  @@index([status])
}

model Sprint {
  id              String       @id @default(cuid())
  name            String
  goal            String?
  epicId          String
  startDate       DateTime
  endDate         DateTime
  status          SprintStatus @default(PLANNED)
  plannedPoints   Int          @default(0)
  completedPoints Int          @default(0)
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  epic            Epic         @relation(fields: [epicId], references: [id])
  tasks           Task[]

  @@index([epicId])
  @@index([status])
  @@index([startDate])
}

model Task {
  id             String        @id @default(cuid())
  code           String        @unique
  title          String
  description    String?
  epicId         String
  sprintId       String?
  type           TaskType      @default(TASK)
  priority       TaskPriority  @default(MEDIUM)
  status         TaskStatus    @default(BACKLOG)
  storyPoints    Int?
  estimatedHours Float?
  actualHours    Float?
  assigneeId     String?
  blockedById    String?
  labels         String[]      @default([])
  complianceRef  String?
  dueDate        DateTime?
  startedAt      DateTime?
  completedAt    DateTime?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  blockedBy      Task?         @relation("TaskBlocks", fields: [blockedById], references: [id])
  blocks         Task[]        @relation("TaskBlocks")
  epic           Epic          @relation(fields: [epicId], references: [id])
  sprint         Sprint?       @relation(fields: [sprintId], references: [id])
  comments       TaskComment[]

  @@index([epicId])
  @@index([sprintId])
  @@index([status])
  @@index([priority])
  @@index([type])
}

model TaskComment {
  id        String   @id @default(cuid())
  taskId    String
  authorId  String?
  content   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  task      Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)

  @@index([taskId])
}

model SpvToken {
  id               String        @id @default(cuid())
  userId           String        @unique
  organizationId   String?
  cui              String
  accessToken      String
  refreshToken     String?
  tokenType        String        @default("Bearer")
  expiresAt        DateTime
  refreshExpiresAt DateTime?
  scope            String?
  status           SpvStatus     @default(PENDING)
  lastUsedAt       DateTime?
  lastError        String?
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt
  organization     Organization? @relation(fields: [organizationId], references: [id])

  @@index([organizationId])
  @@index([cui])
  @@index([status])
}

model SpvMessage {
  id             String           @id @default(cuid())
  userId         String
  organizationId String?
  cui            String
  messageId      String           @unique
  messageType    SpvMessageType
  subject        String
  content        String?
  xmlContent     String?
  relatedInvoice String?
  relatedSaft    String?
  uploadIndex    String?
  status         SpvMessageStatus @default(UNREAD)
  readAt         DateTime?
  processedAt    DateTime?
  anafCreatedAt  DateTime
  receivedAt     DateTime         @default(now())
  organization   Organization?    @relation(fields: [organizationId], references: [id])

  @@index([userId])
  @@index([organizationId])
  @@index([cui])
  @@index([status])
  @@index([messageType])
  @@index([anafCreatedAt])
}

model SpvSubmission {
  id             String              @id @default(cuid())
  userId         String
  organizationId String?
  cui            String
  submissionType SpvSubmissionType
  uploadIndex    String              @unique
  documentId     String?
  documentType   String?
  period         String?
  xmlHash        String?
  xmlSize        Int?
  status         SpvSubmissionStatus @default(PENDING)
  anafStatus     String?
  anafMessages   Json?
  submittedAt    DateTime            @default(now())
  lastCheckedAt  DateTime?
  completedAt    DateTime?
  errorCode      String?
  errorMessage   String?
  retryCount     Int                 @default(0)
  organization   Organization?       @relation(fields: [organizationId], references: [id])

  @@index([userId])
  @@index([organizationId])
  @@index([cui])
  @@index([status])
  @@index([submissionType])
  @@index([uploadIndex])
  @@index([submittedAt])
}

model Vehicle {
  id               String            @id @default(cuid())
  userId           String
  organizationId   String?
  licensePlate     String            @unique
  vin              String?           @unique
  make             String
  model            String
  year             Int?
  type             VehicleType       @default(VAN)
  maxPayloadKg     Decimal?          @db.Decimal(10, 2)
  cargoVolumeM3    Decimal?          @db.Decimal(10, 2)
  fuelType         FuelType          @default(DIESEL)
  currentLat       Decimal?          @db.Decimal(10, 7)
  currentLng       Decimal?          @db.Decimal(10, 7)
  lastLocationAt   DateTime?
  status           VehicleStatus     @default(AVAILABLE)
  mileage          Int?
  nextServiceDate  DateTime?
  lastServiceDate  DateTime?
  insuranceExpiry  DateTime?
  tuvExpiry        DateTime?
  assignedDriverId String?
  monthlyLeaseCost Decimal?          @db.Decimal(10, 2)
  insuranceCost    Decimal?          @db.Decimal(10, 2)
  notes            String?
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  deliveryRoutes   DeliveryRoute[]
  fuelLogs         FuelLog[]
  maintenanceLogs  MaintenanceLog[]
  assignedDriver   Employee?         @relation("AssignedVehicle", fields: [assignedDriverId], references: [id])
  positions        VehiclePosition[]

  @@index([userId])
  @@index([organizationId])
  @@index([licensePlate])
  @@index([status])
  @@index([assignedDriverId])
}

model DeliveryRoute {
  id                 String         @id @default(cuid())
  userId             String
  organizationId     String?
  routeName          String?
  routeDate          DateTime       @db.Date
  vehicleId          String
  driverId           String?
  totalStops         Int            @default(0)
  completedStops     Int            @default(0)
  totalParcels       Int            @default(0)
  deliveredParcels   Int            @default(0)
  failedDeliveries   Int            @default(0)
  plannedDistanceKm  Decimal?       @db.Decimal(10, 2)
  actualDistanceKm   Decimal?       @db.Decimal(10, 2)
  plannedDurationMin Int?
  actualDurationMin  Int?
  plannedStartTime   DateTime?
  actualStartTime    DateTime?
  plannedEndTime     DateTime?
  actualEndTime      DateTime?
  status             RouteStatus    @default(PLANNED)
  deliveryZone       String?
  notes              String?
  createdAt          DateTime       @default(now())
  updatedAt          DateTime       @updatedAt
  driver             Employee?      @relation("DriverRoutes", fields: [driverId], references: [id])
  vehicle            Vehicle        @relation(fields: [vehicleId], references: [id])
  stops              DeliveryStop[]

  @@index([userId])
  @@index([organizationId])
  @@index([vehicleId])
  @@index([driverId])
  @@index([routeDate])
  @@index([status])
}

model DeliveryStop {
  id               String                 @id @default(cuid())
  routeId          String
  stopOrder        Int
  recipientName    String
  recipientPhone   String?
  recipientEmail   String?
  streetAddress    String
  postalCode       String
  city             String                 @default("MÃ¼nchen")
  latitude         Decimal?               @db.Decimal(10, 7)
  longitude        Decimal?               @db.Decimal(10, 7)
  parcelCount      Int                    @default(1)
  trackingNumbers  String[]
  status           DeliveryStopStatus     @default(PENDING)
  attemptCount     Int                    @default(0)
  estimatedArrival DateTime?
  actualArrival    DateTime?
  completedAt      DateTime?
  signature        String?
  photoUrl         String?
  recipientNote    String?
  failureReason    DeliveryFailureReason?
  failureNote      String?
  createdAt        DateTime               @default(now())
  updatedAt        DateTime               @updatedAt
  route            DeliveryRoute          @relation(fields: [routeId], references: [id], onDelete: Cascade)

  @@index([routeId])
  @@index([status])
  @@index([postalCode])
}

model FuelLog {
  id              String   @id @default(cuid())
  vehicleId       String
  driverId        String?
  fuelType        FuelType
  liters          Decimal  @db.Decimal(10, 2)
  pricePerLiter   Decimal  @db.Decimal(10, 3)
  totalCost       Decimal  @db.Decimal(10, 2)
  odometerReading Int
  stationName     String?
  stationAddress  String?
  fueledAt        DateTime @default(now())
  createdAt       DateTime @default(now())
  vehicle         Vehicle  @relation(fields: [vehicleId], references: [id])

  @@index([vehicleId])
  @@index([fueledAt])
}

model MaintenanceLog {
  id              String          @id @default(cuid())
  vehicleId       String
  type            MaintenanceType
  description     String
  odometerReading Int?
  partsCost       Decimal?        @db.Decimal(10, 2)
  laborCost       Decimal?        @db.Decimal(10, 2)
  totalCost       Decimal?        @db.Decimal(10, 2)
  vendorName      String?
  vendorAddress   String?
  invoiceNumber   String?
  serviceDate     DateTime        @default(now())
  nextServiceDate DateTime?
  notes           String?
  createdAt       DateTime        @default(now())
  vehicle         Vehicle         @relation(fields: [vehicleId], references: [id])

  @@index([vehicleId])
  @@index([serviceDate])
  @@index([type])
}

model CourierDelivery {
  id               String          @id @default(cuid())
  userId           String
  trackingNumber   String
  provider         CourierProvider
  status           String
  recipientName    String?
  recipientAddress String?
  deliveredAt      DateTime?
  amount           Decimal?        @db.Decimal(10, 2)
  currency         String          @default("EUR")
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt

  @@unique([trackingNumber, provider])
  @@index([userId])
  @@index([provider])
  @@index([status])
  @@index([createdAt])
}

model VehiclePosition {
  id            String   @id @default(cuid())
  vehicleId     String
  latitude      Decimal  @db.Decimal(10, 7)
  longitude     Decimal  @db.Decimal(10, 7)
  altitude      Decimal? @db.Decimal(10, 2)
  speed         Decimal? @db.Decimal(10, 2)
  heading       Int?
  accuracy      Decimal? @db.Decimal(10, 2)
  ignition      Boolean  @default(true)
  engineRunning Boolean  @default(true)
  routeId       String?
  recordedAt    DateTime @default(now())
  receivedAt    DateTime @default(now())
  vehicle       Vehicle  @relation(fields: [vehicleId], references: [id], onDelete: Cascade)

  @@index([vehicleId])
  @@index([recordedAt])
  @@index([routeId])
}

model Geofence {
  id             String          @id @default(cuid())
  userId         String
  organizationId String?
  name           String
  description    String?
  type           GeofenceType    @default(CIRCLE)
  centerLat      Decimal?        @db.Decimal(10, 7)
  centerLng      Decimal?        @db.Decimal(10, 7)
  radiusMeters   Int?
  polygonPoints  Json?
  alertOnEntry   Boolean         @default(true)
  alertOnExit    Boolean         @default(true)
  isActive       Boolean         @default(true)
  deliveryZone   String?
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  events         GeofenceEvent[]

  @@index([userId])
  @@index([organizationId])
  @@index([isActive])
}

model GeofenceEvent {
  id         String            @id @default(cuid())
  geofenceId String
  vehicleId  String
  eventType  GeofenceEventType
  latitude   Decimal           @db.Decimal(10, 7)
  longitude  Decimal           @db.Decimal(10, 7)
  occurredAt DateTime          @default(now())
  geofence   Geofence          @relation(fields: [geofenceId], references: [id], onDelete: Cascade)

  @@index([geofenceId])
  @@index([vehicleId])
  @@index([occurredAt])
}

model HRContract {
  id               String                @id @default(cuid())
  userId           String
  employeeId       String
  type             HRContractType
  status           HRContractStatus      @default(DRAFT)
  startDate        DateTime
  endDate          DateTime?
  probationEnd     DateTime?
  salary           Decimal               @db.Decimal(10, 2)
  currency         String                @default("RON")
  workHours        Int                   @default(40)
  position         String
  department       String?
  nonCompete       Boolean               @default(false)
  telework         Boolean               @default(false)
  teleworkDays     Int?
  signedAt         DateTime?
  signatureUrl     String?
  signedByEmployee Boolean               @default(false)
  signedByEmployer Boolean               @default(false)
  revisalSubmitted Boolean               @default(false)
  revisalId        String?
  revisalStatus    String?
  templateId       String?
  templateVersion  Int?
  createdAt        DateTime              @default(now())
  updatedAt        DateTime              @updatedAt
  employee         Employee              @relation(fields: [employeeId], references: [id])
  amendments       HRContractAmendment[]

  @@index([userId])
  @@index([employeeId])
  @@index([status])
}

model HRContractAmendment {
  id            String     @id @default(cuid())
  contractId    String
  reason        String
  changes       Json
  effectiveDate DateTime
  signedAt      DateTime?
  createdAt     DateTime   @default(now())
  contract      HRContract @relation(fields: [contractId], references: [id])

  @@index([contractId])
}

model HRForm {
  id              String       @id @default(cuid())
  userId          String
  employeeId      String?
  type            HRFormType
  title           String
  status          HRFormStatus @default(DRAFT)
  data            Json
  submittedAt     DateTime?
  approvedAt      DateTime?
  approvedBy      String?
  rejectedAt      DateTime?
  rejectedBy      String?
  rejectionReason String?
  createdAt       DateTime     @default(now())
  updatedAt       DateTime     @updatedAt
  employee        Employee?    @relation(fields: [employeeId], references: [id])

  @@index([userId])
  @@index([type])
  @@index([status])
}

model HSEIncident {
  id                String              @id @default(cuid())
  userId            String
  reporterId        String
  type              HSEIncidentType
  severity          HSEIncidentSeverity
  status            HSEIncidentStatus   @default(REPORTED)
  title             String
  description       String
  location          String
  latitude          Float?
  longitude         Float?
  siteId            String?
  photoUrls         String[]
  videoUrls         String[]
  occurredAt        DateTime
  reportedAt        DateTime            @default(now())
  resolvedAt        DateTime?
  rootCause         String?
  correctiveActions String?
  preventiveActions String?
  employeeId        String?
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  employee          Employee?           @relation(fields: [employeeId], references: [id])

  @@index([userId])
  @@index([severity])
  @@index([status])
}

model HSERiskAssessment {
  id               String        @id @default(cuid())
  userId           String
  title            String
  description      String?
  location         String
  department       String?
  processArea      String?
  hazards          Json
  riskLevel        HSERiskLevel
  likelihood       Int
  impact           Int
  riskScore        Int
  existingControls String?
  proposedControls String?
  residualRisk     HSERiskLevel?
  assessedAt       DateTime      @default(now())
  reviewDueAt      DateTime
  reviewedAt       DateTime?
  reviewedBy       String?
  status           HSERiskStatus @default(RISK_DRAFT)
  createdAt        DateTime      @default(now())
  updatedAt        DateTime      @updatedAt

  @@index([userId])
  @@index([riskLevel])
  @@index([status])
}

model HSESafetyTraining {
  id              String                @id @default(cuid())
  userId          String
  employeeId      String
  trainingType    HSESafetyTrainingType
  title           String
  description     String?
  scheduledAt     DateTime
  completedAt     DateTime?
  expiresAt       DateTime?
  certificateUrl  String?
  score           Float?
  passed          Boolean?
  linkedToPayroll Boolean               @default(false)
  createdAt       DateTime              @default(now())
  updatedAt       DateTime              @updatedAt
  employee        Employee              @relation(fields: [employeeId], references: [id])

  @@index([userId])
  @@index([employeeId])
}

model LMSCourse {
  id                  String            @id @default(cuid())
  title               String
  slug                String            @unique
  description         String
  category            LMSCourseCategory
  level               LMSCourseLevel    @default(BEGINNER)
  thumbnailUrl        String?
  duration            Int
  price               Decimal?          @db.Decimal(10, 2)
  currency            String            @default("EUR")
  isFree              Boolean           @default(false)
  language            String            @default("ro")
  tags                String[]
  status              LMSCourseStatus   @default(LMS_DRAFT)
  publishedAt         DateTime?
  hasCertificate      Boolean           @default(true)
  certificateTemplate String?
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  modules             LMSCourseModule[]
  enrollments         LMSEnrollment[]

  @@index([category])
  @@index([status])
}

model LMSCourseModule {
  id          String      @id @default(cuid())
  courseId    String
  title       String
  description String?
  order       Int
  duration    Int
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  course      LMSCourse   @relation(fields: [courseId], references: [id])
  lessons     LMSLesson[]

  @@index([courseId])
}

model LMSLesson {
  id          String              @id @default(cuid())
  moduleId    String
  title       String
  description String?
  order       Int
  type        LMSLessonType
  videoUrl    String?
  content     String?
  duration    Int
  attachments String[]
  createdAt   DateTime            @default(now())
  updatedAt   DateTime            @updatedAt
  module      LMSCourseModule     @relation(fields: [moduleId], references: [id])
  progress    LMSLessonProgress[]

  @@index([moduleId])
}

model LMSEnrollment {
  id                  String              @id @default(cuid())
  userId              String
  courseId            String
  progress            Float               @default(0)
  startedAt           DateTime            @default(now())
  completedAt         DateTime?
  certificateUrl      String?
  certificateIssuedAt DateTime?
  quizScore           Float?
  passed              Boolean?
  createdAt           DateTime            @default(now())
  updatedAt           DateTime            @updatedAt
  course              LMSCourse           @relation(fields: [courseId], references: [id])
  lessonProgress      LMSLessonProgress[]

  @@unique([userId, courseId])
  @@index([userId])
  @@index([courseId])
}

model LMSLessonProgress {
  id              String        @id @default(cuid())
  enrollmentId    String
  lessonId        String
  completed       Boolean       @default(false)
  completedAt     DateTime?
  watchedDuration Int?
  lastPosition    Int?
  attempts        Int           @default(0)
  bestScore       Float?
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  enrollment      LMSEnrollment @relation(fields: [enrollmentId], references: [id])
  lesson          LMSLesson     @relation(fields: [lessonId], references: [id])

  @@unique([enrollmentId, lessonId])
}

model FreelancerProfile {
  id                String                       @id @default(cuid())
  userId            String?
  name              String
  email             String                       @unique
  phone             String?
  skills            String[]
  categories        String[]
  experience        Int?
  portfolioUrl      String?
  linkedinUrl       String?
  bio               String?
  availability      FreelancerAvailability       @default(AVAILABLE)
  hourlyRate        Decimal?                     @db.Decimal(10, 2)
  currency          String                       @default("EUR")
  preferredWorkType String[]
  rating            Float?                       @default(0)
  reviewCount       Int                          @default(0)
  verified          Boolean                      @default(false)
  verifiedAt        DateTime?
  pfaNumber         String?
  cui               String?
  createdAt         DateTime                     @default(now())
  updatedAt         DateTime                     @updatedAt
  projects          FreelanceProjectAssignment[]
  contracts         FreelancerContract[]

  @@index([userId])
  @@index([availability])
}

model FreelanceProjectAssignment {
  id           String                      @id @default(cuid())
  userId       String
  title        String
  description  String
  skills       String[]
  budget       Decimal?                    @db.Decimal(10, 2)
  budgetType   FreelanceBudgetType         @default(FIXED)
  currency     String                      @default("EUR")
  startDate    DateTime?
  endDate      DateTime?
  status       FreelanceProjectStatus      @default(PROJECT_DRAFT)
  freelancerId String?
  createdAt    DateTime                    @default(now())
  updatedAt    DateTime                    @updatedAt
  freelancer   FreelancerProfile?          @relation(fields: [freelancerId], references: [id])
  milestones   FreelanceProjectMilestone[]
  timeEntries  FreelanceTimeEntry[]

  @@index([userId])
  @@index([freelancerId])
  @@index([status])
}

model FreelanceProjectMilestone {
  id          String                     @id @default(cuid())
  projectId   String
  title       String
  description String?
  amount      Decimal                    @db.Decimal(10, 2)
  dueDate     DateTime?
  completedAt DateTime?
  status      FreelanceMilestoneStatus   @default(MILESTONE_PENDING)
  escrowHeld  Boolean                    @default(false)
  releasedAt  DateTime?
  createdAt   DateTime                   @default(now())
  project     FreelanceProjectAssignment @relation(fields: [projectId], references: [id])

  @@index([projectId])
}

model FreelancerContract {
  id           String                 @id @default(cuid())
  freelancerId String
  type         FreelancerContractType
  startDate    DateTime
  endDate      DateTime?
  rate         Decimal                @db.Decimal(10, 2)
  rateType     FreelanceBudgetType
  currency     String                 @default("EUR")
  ndaSigned    Boolean                @default(false)
  ndaSignedAt  DateTime?
  ipClause     Boolean                @default(false)
  status       HRContractStatus       @default(DRAFT)
  signedAt     DateTime?
  createdAt    DateTime               @default(now())
  updatedAt    DateTime               @updatedAt
  freelancer   FreelancerProfile      @relation(fields: [freelancerId], references: [id])

  @@index([freelancerId])
}

model FreelanceTimeEntry {
  id            String                     @id @default(cuid())
  projectId     String
  freelancerId  String
  startTime     DateTime
  endTime       DateTime?
  duration      Int?
  description   String?
  screenshotUrl String?
  activityLevel Float?
  billed        Boolean                    @default(false)
  invoiceId     String?
  createdAt     DateTime                   @default(now())
  project       FreelanceProjectAssignment @relation(fields: [projectId], references: [id])

  @@index([projectId])
  @@index([freelancerId])
}

model ForumCategory {
  id          String        @id @default(cuid())
  name        String
  nameEn      String?
  slug        String        @unique
  description String?
  icon        String?
  sortOrder   Int           @default(0)
  threadCount Int           @default(0)
  postCount   Int           @default(0)
  isActive    Boolean       @default(true)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  threads     ForumThread[]

  @@index([isActive])
}

model ForumThread {
  id          String        @id @default(cuid())
  categoryId  String
  title       String
  slug        String        @unique
  content     String
  authorId    String?
  authorName  String
  viewCount   Int           @default(0)
  replyCount  Int           @default(0)
  isPinned    Boolean       @default(false)
  isLocked    Boolean       @default(false)
  isFeatured  Boolean       @default(false)
  lastReplyAt DateTime?
  lastReplyBy String?
  tags        String[]
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  posts       ForumPost[]
  category    ForumCategory @relation(fields: [categoryId], references: [id])

  @@index([categoryId])
  @@index([authorId])
  @@index([isPinned])
}

model ForumPost {
  id         String      @id @default(cuid())
  threadId   String
  content    String
  authorId   String?
  authorName String
  replyToId  String?
  upvotes    Int         @default(0)
  downvotes  Int         @default(0)
  isAccepted Boolean     @default(false)
  isEdited   Boolean     @default(false)
  editedAt   DateTime?
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  replyTo    ForumPost?  @relation("PostReplies", fields: [replyToId], references: [id])
  replies    ForumPost[] @relation("PostReplies")
  thread     ForumThread @relation(fields: [threadId], references: [id])

  @@index([threadId])
  @@index([authorId])
}

model BlogCategory {
  id          String        @id @default(cuid())
  name        String
  nameEn      String?
  slug        String        @unique
  description String?
  sortOrder   Int           @default(0)
  isActive    Boolean       @default(true)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  articles    BlogArticle[]

  @@index([isActive])
}

model BlogArticle {
  id               String            @id @default(cuid())
  categoryId       String?
  title            String
  titleEn          String?
  slug             String            @unique
  excerpt          String?
  content          String
  authorId         String?
  authorName       String
  authorBio        String?
  featuredImageUrl String?
  readTime         Int?
  tags             String[]
  status           BlogArticleStatus @default(BLOG_DRAFT)
  publishedAt      DateTime?
  viewCount        Int               @default(0)
  likeCount        Int               @default(0)
  shareCount       Int               @default(0)
  seoTitle         String?
  seoDescription   String?
  seoKeywords      String[]
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  category         BlogCategory?     @relation(fields: [categoryId], references: [id])

  @@index([categoryId])
  @@index([authorId])
  @@index([status])
  @@index([publishedAt])
}

model DemoBusiness {
  id            String                @id @default(cuid())
  name          String
  cui           String                @unique
  industry      String
  city          String
  county        String
  employeeCount Int                   @default(0)
  revenue       Decimal?              @db.Decimal(15, 2)
  description   String?
  tier          Tier                  @default(FREE)
  isActive      Boolean               @default(true)
  createdAt     DateTime              @default(now())
  updatedAt     DateTime              @updatedAt
  contacts      DemoBusinessContact[]
  employees     DemoEmployee[]

  @@index([industry])
}

model DemoBusinessContact {
  id         String       @id @default(cuid())
  businessId String
  name       String
  role       String
  email      String
  phone      String?
  isPrimary  Boolean      @default(false)
  createdAt  DateTime     @default(now())
  business   DemoBusiness @relation(fields: [businessId], references: [id])

  @@index([businessId])
}

model DemoEmployee {
  id           String             @id @default(cuid())
  businessId   String
  firstName    String
  lastName     String
  email        String
  department   String
  position     String
  hireDate     DateTime
  salary       Decimal            @db.Decimal(10, 2)
  contractType DemoContractType   @default(DEMO_FULL_TIME)
  status       DemoEmployeeStatus @default(DEMO_ACTIVE)
  createdAt    DateTime           @default(now())
  business     DemoBusiness       @relation(fields: [businessId], references: [id])

  @@index([businessId])
  @@index([department])
}

model SyncLog {
  id          String   @id @default(cuid())
  userId      String
  service     String
  entityType  String
  entityId    String
  direction   String
  status      String
  details     String?
  xmlSent     String?
  xmlReceived String?
  syncedAt    DateTime @default(now())
  createdAt   DateTime @default(now())
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([service])
  @@index([entityType])
  @@index([status])
  @@index([syncedAt])
}

model OrganizationIntegration {
  id             String       @id @default(cuid())
  organizationId String
  provider       String
  credentials    String?
  isActive       Boolean      @default(false)
  lastSyncAt     DateTime?
  lastError      String?
  settings       Json?        @default("{}")
  createdAt      DateTime     @default(now())
  updatedAt      DateTime     @updatedAt
  organization   Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)

  @@unique([organizationId, provider])
  @@index([organizationId])
  @@index([provider])
}

model RecurringInvoice {
  id               String       @id @default(cuid())
  organizationId   String
  name             String
  description      String?
  partnerId        String
  frequency        String
  startDate        DateTime
  endDate          DateTime?
  nextRunDate      DateTime
  lastRunDate      DateTime?
  dayOfMonth       Int?
  dayOfWeek        Int?
  isActive         Boolean      @default(true)
  autoSend         Boolean      @default(false)
  autoSubmitSpv    Boolean      @default(false)
  currency         String       @default("RON")
  vatRate          Decimal      @default(19) @db.Decimal(5, 2)
  items            Json
  notes            String?
  paymentTermsDays Int          @default(30)
  seriesName       String?
  generatedCount   Int          @default(0)
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  invoices         Invoice[]    @relation("RecurringInvoiceInvoices")
  organization     Organization @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  partner          Partner      @relation(fields: [partnerId], references: [id])

  @@index([organizationId])
  @@index([partnerId])
  @@index([isActive])
  @@index([nextRunDate])
}

model InvoiceItem {
  id          String   @id @default(cuid())
  invoiceId   String
  lineNumber  Int      @default(1)
  description String
  code        String?
  quantity    Decimal  @db.Decimal(12, 4)
  unit        String   @default("buc")
  unitPrice   Decimal  @db.Decimal(12, 4)
  vatRate     Decimal  @default(19) @db.Decimal(5, 2)
  discount    Decimal  @default(0) @db.Decimal(5, 2)
  netAmount   Decimal  @db.Decimal(12, 2)
  vatAmount   Decimal  @db.Decimal(12, 2)
  grossAmount Decimal  @db.Decimal(12, 2)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  invoice     Invoice  @relation(fields: [invoiceId], references: [id], onDelete: Cascade)

  @@index([invoiceId])
}

model Product {
  id             String          @id @default(cuid())
  userId         String
  organizationId String?
  code           String
  name           String
  description    String?
  category       String?
  brand          String?
  unit           String          @default("buc")
  purchasePrice  Decimal         @default(0) @db.Decimal(12, 2)
  salePrice      Decimal         @default(0) @db.Decimal(12, 2)
  vatRate        Decimal         @default(19) @db.Decimal(5, 2)
  currency       String          @default("RON")
  currentStock   Decimal         @default(0) @db.Decimal(12, 4)
  reservedStock  Decimal         @default(0) @db.Decimal(12, 4)
  minStockLevel  Decimal         @default(0) @db.Decimal(12, 4)
  maxStockLevel  Decimal?        @db.Decimal(12, 4)
  barcode        String?
  location       String?
  supplier       String?
  isActive       Boolean         @default(true)
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
  organization   Organization?   @relation(fields: [organizationId], references: [id])
  user           User            @relation(fields: [userId], references: [id])
  stockAlerts    StockAlert[]
  stockMovements StockMovement[]

  @@unique([userId, code])
  @@index([userId])
  @@index([organizationId])
  @@index([category])
  @@index([isActive])
}

model StockMovement {
  id            String            @id @default(cuid())
  productId     String
  type          StockMovementType
  quantity      Decimal           @db.Decimal(12, 4)
  previousStock Decimal           @db.Decimal(12, 4)
  newStock      Decimal           @db.Decimal(12, 4)
  reference     String?
  referenceType String?
  referenceId   String?
  unitCost      Decimal?          @db.Decimal(12, 2)
  notes         String?
  createdBy     String?
  createdAt     DateTime          @default(now())
  product       Product           @relation(fields: [productId], references: [id])

  @@index([productId])
  @@index([type])
  @@index([createdAt])
}

model StockAlert {
  id             String           @id @default(cuid())
  productId      String
  userId         String
  type           StockAlertType
  threshold      Decimal          @db.Decimal(12, 4)
  currentLevel   Decimal          @db.Decimal(12, 4)
  status         StockAlertStatus @default(ACTIVE)
  acknowledgedAt DateTime?
  acknowledgedBy String?
  createdAt      DateTime         @default(now())
  resolvedAt     DateTime?
  product        Product          @relation(fields: [productId], references: [id])

  @@index([productId])
  @@index([userId])
  @@index([status])
}

model Contract {
  id                  String         @id @default(cuid())
  userId              String
  organizationId      String?
  contractNumber      String
  title               String
  description         String?
  type                ContractType   @default(SERVICE)
  status              ContractStatus @default(DRAFT)
  partnerId           String?
  partnerName         String
  partnerCui          String?
  partnerAddress      String?
  totalValue          Decimal        @db.Decimal(14, 2)
  currency            String         @default("RON")
  paymentTerms        String?
  billingFrequency    String?
  startDate           DateTime
  endDate             DateTime?
  signedAt            DateTime?
  terminatedAt        DateTime?
  autoRenew           Boolean        @default(false)
  renewalPeriodMonths Int?
  renewalNoticesDays  Int?
  documentId          String?        @unique
  attachments         Json?
  linkedInvoiceIds    String[]       @default([])
  isCompliant         Boolean        @default(true)
  complianceNotes     String?
  tags                String[]       @default([])
  metadata            Json?
  notes               String?
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  document            Document?      @relation(fields: [documentId], references: [id])
  organization        Organization?  @relation(fields: [organizationId], references: [id])
  partner             Partner?       @relation(fields: [partnerId], references: [id])
  user                User           @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([partnerId])
  @@index([status])
  @@index([type])
  @@index([startDate])
  @@index([endDate])
}

model ContactSubmission {
  id          String    @id @default(cuid())
  referenceId String    @unique
  name        String
  email       String
  phone       String?
  company     String?
  subject     String
  message     String
  status      String    @default("NEW")
  ipAddress   String?
  userAgent   String?
  notes       String?
  repliedAt   DateTime?
  repliedBy   String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@index([email])
  @@index([status])
  @@index([createdAt])
}

model ErrorLog {
  id             String   @id @default(cuid())
  message        String
  stack          String   @default("")
  type           String
  componentStack String?  @default("")
  url            String?  @default("")
  userAgent      String?  @default("")
  userId         String?  @default("anonymous")
  source         String   @default("frontend")
  metadata       String?  @default("{}")
  createdAt      DateTime @default(now())

  @@index([createdAt])
  @@index([type])
  @@index([userId])
  @@index([source])
}

model SimulationGame {
  id              String                  @id @default(cuid())
  userId          String
  businessId      String?
  name            String
  description     String?
  currentMonth    Int                     @default(1)
  currentYear     Int                     @default(2025)
  status          SimulationStatus        @default(SIM_ACTIVE)
  difficulty      SimulationDifficulty    @default(SIM_NORMAL)
  healthScore     Float                   @default(100)
  financialScore  Float                   @default(100)
  operationsScore Float                   @default(100)
  complianceScore Float                   @default(100)
  growthScore     Float                   @default(100)
  scenarioId      String?
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt
  achievements    SimulationAchievement[]
  decisions       SimulationDecision[]
  events          SimulationEvent[]
  scenario        SimulationScenario?     @relation(fields: [scenarioId], references: [id])
  states          SimulationState[]

  @@index([userId])
  @@index([status])
  @@index([scenarioId])
}

model SimulationState {
  id              String         @id @default(cuid())
  gameId          String
  month           Int
  year            Int
  cash            Decimal        @default(50000) @db.Decimal(14, 2)
  revenue         Decimal        @default(0) @db.Decimal(14, 2)
  expenses        Decimal        @default(0) @db.Decimal(14, 2)
  profit          Decimal        @default(0) @db.Decimal(14, 2)
  receivables     Decimal        @default(0) @db.Decimal(14, 2)
  payables        Decimal        @default(0) @db.Decimal(14, 2)
  inventory       Decimal        @default(0) @db.Decimal(14, 2)
  equipment       Decimal        @default(0) @db.Decimal(14, 2)
  loans           Decimal        @default(0) @db.Decimal(14, 2)
  employees       Int            @default(1)
  capacity        Float          @default(100)
  utilization     Float          @default(50)
  quality         Float          @default(80)
  marketShare     Float          @default(0.1)
  customerCount   Int            @default(10)
  reputation      Float          @default(50)
  taxOwed         Decimal        @default(0) @db.Decimal(12, 2)
  vatBalance      Decimal        @default(0) @db.Decimal(12, 2)
  penaltiesRisk   Float          @default(0)
  auditRisk       Float          @default(5)
  metricsSnapshot Json?
  createdAt       DateTime       @default(now())
  game            SimulationGame @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@unique([gameId, month, year])
  @@index([gameId])
}

model SimulationDecision {
  id               String              @id @default(cuid())
  gameId           String
  month            Int
  year             Int
  category         SimDecisionCategory
  type             String
  parameters       Json
  impactSummary    String?
  impactMetrics    Json?
  relatedCourseId  String?
  relatedLessonId  String?
  aiRecommendation String?
  wasSuccessful    Boolean?
  outcomeNotes     String?
  createdAt        DateTime            @default(now())
  game             SimulationGame      @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@index([gameId])
  @@index([category])
}

model SimulationEvent {
  id              String           @id @default(cuid())
  gameId          String
  month           Int
  year            Int
  type            SimEventType
  severity        SimEventSeverity @default(SEVERITY_MEDIUM)
  title           String
  description     String
  impact          Json
  responseOptions Json?
  playerChoice    String?
  outcome         String?
  outcomeImpact   Json?
  deadline        Int?
  expiresAt       DateTime?
  createdAt       DateTime         @default(now())
  game            SimulationGame   @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@index([gameId])
  @@index([type])
}

model SimulationAchievement {
  id            String         @id @default(cuid())
  gameId        String
  achievementId String
  title         String
  description   String?
  icon          String?
  xpReward      Int            @default(100)
  unlockedAt    DateTime       @default(now())
  game          SimulationGame @relation(fields: [gameId], references: [id], onDelete: Cascade)

  @@unique([gameId, achievementId])
  @@index([gameId])
}

model SimulationScenario {
  id               String               @id @default(cuid())
  slug             String               @unique
  title            String
  titleEn          String?
  description      String
  descriptionEn    String?
  difficulty       SimulationDifficulty
  initialState     Json
  objectives       Json
  timeLimit        Int?
  type             SimScenarioType
  xpReward         Int                  @default(500)
  badgeId          String?
  relatedCourseIds String[]             @default([])
  isActive         Boolean              @default(true)
  isFeatured       Boolean              @default(false)
  sortOrder        Int                  @default(0)
  createdAt        DateTime             @default(now())
  updatedAt        DateTime             @updatedAt
  games            SimulationGame[]

  @@index([type])
  @@index([difficulty])
  @@index([isActive])
}

enum OrgRole {
  OWNER
  ADMIN
  ACCOUNTANT
  MEMBER
  VIEWER
}

enum InvitationStatus {
  PENDING
  ACCEPTED
  EXPIRED
  CANCELLED
}

enum Tier {
  FREE
  PRO
  BUSINESS
  ENTERPRISE
}

enum UserRole {
  USER
  ADMIN
  ACCOUNTANT
}

enum DocStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

enum PaymentMethod {
  BANK_TRANSFER
  CARD
  CASH
  CHECK
  OTHER
}

enum PaymentRecordStatus {
  PENDING
  COMPLETED
  CANCELLED
  REFUNDED
}

enum PaymentStatus {
  UNPAID
  PARTIAL
  PAID
  OVERDUE
}

enum InvoiceType {
  ISSUED
  RECEIVED
}

enum InvoiceStatus {
  DRAFT
  PENDING
  APPROVED
  SUBMITTED
  PAID
  CANCELLED
}

enum ReportStatus {
  DRAFT
  VALIDATING
  VALIDATED
  SUBMITTED
  ACCEPTED
  REJECTED
}

enum EmployeeStatus {
  ACTIVE
  ON_LEAVE
  TERMINATED
}

enum PayrollStatus {
  PENDING
  APPROVED
  PAID
}

enum TimesheetStatus {
  PENDING
  APPROVED
  REJECTED
}

enum PartnerType {
  CUSTOMER
  SUPPLIER
  BOTH
}

enum DocumentType {
  INVOICE
  RECEIPT
  CONTRACT
  OTHER
}

enum ModuleType {
  FINANCE
  OPERATIONS
  HR
  FUNDS
  AI_ML
  COMPLIANCE
  OPERATIONS_CONTROL
  ECOSYSTEM
  ONBOARDING
  PRICING_SUPPORT
}

enum EpicStatus {
  PLANNED
  IN_PROGRESS
  COMPLETED
  ON_HOLD
}

enum SprintStatus {
  PLANNED
  ACTIVE
  COMPLETED
  CANCELLED
}

enum TaskType {
  EPIC
  STORY
  TASK
  BUG
  SPIKE
  COMPLIANCE
}

enum TaskPriority {
  CRITICAL
  HIGH
  MEDIUM
  LOW
}

enum TaskStatus {
  BACKLOG
  TODO
  IN_PROGRESS
  IN_REVIEW
  BLOCKED
  DONE
  CANCELLED
}

enum SpvStatus {
  PENDING
  ACTIVE
  EXPIRED
  REVOKED
  ERROR
}

enum SpvMessageType {
  EFACTURA_RECEIVED
  EFACTURA_RESPONSE
  EFACTURA_ERROR
  SAFT_RESPONSE
  SAFT_ERROR
  NOTIFICATION
  DEADLINE_REMINDER
  OTHER
}

enum SpvMessageStatus {
  UNREAD
  READ
  PROCESSED
  ARCHIVED
}

enum SpvSubmissionType {
  EFACTURA_SEND
  EFACTURA_DOWNLOAD
  SAFT_D406
  CUI_VALIDATION
  VAT_CHECK
}

enum SpvSubmissionStatus {
  PENDING
  PROCESSING
  ACCEPTED
  REJECTED
  ERROR
  CANCELLED
}

enum VehicleType {
  VAN
  LARGE_VAN
  SMALL_TRUCK
  CARGO_BIKE
}

enum VehicleStatus {
  AVAILABLE
  IN_USE
  MAINTENANCE
  OUT_OF_SERVICE
  RETIRED
}

enum FuelType {
  DIESEL
  PETROL
  ELECTRIC
  HYBRID
  CNG
}

enum RouteStatus {
  PLANNED
  IN_PROGRESS
  COMPLETED
  PARTIAL
  CANCELLED
}

enum DeliveryStopStatus {
  PENDING
  IN_PROGRESS
  DELIVERED
  ATTEMPTED
  FAILED
  RETURNED
}

enum DeliveryFailureReason {
  RECIPIENT_ABSENT
  WRONG_ADDRESS
  REFUSED
  DAMAGED
  ACCESS_ISSUE
  WEATHER
  VEHICLE_ISSUE
  OTHER
}

enum MaintenanceType {
  OIL_CHANGE
  TIRE_ROTATION
  BRAKE_SERVICE
  TUV_INSPECTION
  REPAIR
  SCHEDULED_SERVICE
  UNSCHEDULED_REPAIR
  CLEANING
  OTHER
}

enum CourierProvider {
  DPD
  GLS
  DHL
  UPS
  HERMES
}

enum GeofenceType {
  CIRCLE
  POLYGON
}

enum GeofenceEventType {
  ENTER
  EXIT
}

enum HRContractType {
  HR_FULL_TIME
  HR_PART_TIME
  HR_FIXED_TERM
  HR_INDEFINITE
  HR_INTERNSHIP
  HR_APPRENTICESHIP
  HR_TELEWORK
  HR_SEASONAL
}

enum HRContractStatus {
  DRAFT
  PENDING_SIGNATURE
  ACTIVE
  SUSPENDED
  TERMINATED
  EXPIRED
}

enum HRFormType {
  LEAVE_REQUEST
  MEDICAL_LEAVE
  PERFORMANCE_REVIEW
  EXIT_INTERVIEW
  ONBOARDING
  TRAINING_REQUEST
  EXPENSE_CLAIM
  OVERTIME_REQUEST
  REMOTE_WORK_REQUEST
  EQUIPMENT_REQUEST
}

enum HRFormStatus {
  DRAFT
  SUBMITTED
  IN_REVIEW
  APPROVED
  REJECTED
  CANCELLED
}

enum HSEIncidentType {
  INJURY
  NEAR_MISS
  PROPERTY_DAMAGE
  ENVIRONMENTAL
  FIRE
  CHEMICAL_SPILL
  EQUIPMENT_FAILURE
  SECURITY
  HSE_OTHER
}

enum HSEIncidentSeverity {
  HSE_LOW
  HSE_MEDIUM
  HSE_HIGH
  HSE_CRITICAL
}

enum HSEIncidentStatus {
  REPORTED
  UNDER_INVESTIGATION
  CORRECTIVE_ACTION
  RESOLVED
  CLOSED
}

enum HSERiskLevel {
  VERY_LOW
  LOW
  MEDIUM
  HIGH
  VERY_HIGH
}

enum HSERiskStatus {
  RISK_DRAFT
  RISK_ACTIVE
  RISK_UNDER_REVIEW
  RISK_ARCHIVED
}

enum HSESafetyTrainingType {
  SSM_INDUCTION
  SSM_PERIODIC
  FIRE_SAFETY
  FIRST_AID
  CHEMICAL_HANDLING
  EQUIPMENT_OPERATION
  PPE_USAGE
  EMERGENCY_RESPONSE
  ERGONOMICS
  TRAINING_CUSTOM
}

enum LMSCourseCategory {
  EXCEL_VBA
  PROJECT_MANAGEMENT
  MBA_STRATEGY
  LEAN_OPERATIONS
  FINANCE_OPS
  HR_COMPLIANCE
  HSE_SAFETY
  ACCOUNTING
  TAX_COMPLIANCE
  SOFT_SKILLS
}

enum LMSCourseLevel {
  BEGINNER
  INTERMEDIATE
  ADVANCED
  EXPERT
}

enum LMSCourseStatus {
  LMS_DRAFT
  LMS_REVIEW
  LMS_PUBLISHED
  LMS_ARCHIVED
}

enum LMSLessonType {
  VIDEO
  TEXT
  QUIZ
  EXERCISE
  SIMULATION
  DOWNLOAD
}

enum FreelancerAvailability {
  AVAILABLE
  PARTIALLY_AVAILABLE
  NOT_AVAILABLE
  ON_PROJECT
}

enum FreelanceBudgetType {
  FIXED
  HOURLY
  DAILY
  MILESTONE
}

enum FreelanceProjectStatus {
  PROJECT_DRAFT
  PROJECT_OPEN
  PROJECT_IN_PROGRESS
  PROJECT_ON_HOLD
  PROJECT_COMPLETED
  PROJECT_CANCELLED
}

enum FreelanceMilestoneStatus {
  MILESTONE_PENDING
  MILESTONE_IN_PROGRESS
  MILESTONE_SUBMITTED
  MILESTONE_APPROVED
  MILESTONE_PAID
  MILESTONE_DISPUTED
}

enum FreelancerContractType {
  PROJECT_BASED
  RETAINER
  HOURLY_CONTRACT
  CONSULTING
}

enum BlogArticleStatus {
  BLOG_DRAFT
  BLOG_REVIEW
  BLOG_PUBLISHED
  BLOG_ARCHIVED
}

enum DemoContractType {
  DEMO_FULL_TIME
  DEMO_PART_TIME
  DEMO_CONTRACT
}

enum DemoEmployeeStatus {
  DEMO_ACTIVE
  DEMO_ON_LEAVE
  DEMO_TERMINATED
}

enum StockMovementType {
  IN
  OUT
  ADJUSTMENT
  TRANSFER
  RETURN
}

enum StockAlertType {
  LOW_STOCK
  OUT_OF_STOCK
  OVERSTOCK
  EXPIRING_SOON
}

enum StockAlertStatus {
  ACTIVE
  ACKNOWLEDGED
  RESOLVED
}

enum ContractType {
  SERVICE
  SALE
  PURCHASE
  LEASE
  EMPLOYMENT
  FRAMEWORK
  NDA
  OTHER
}

enum ContractStatus {
  DRAFT
  PENDING_APPROVAL
  ACTIVE
  SUSPENDED
  EXPIRED
  TERMINATED
  RENEWED
}

enum SimulationStatus {
  SIM_ACTIVE
  SIM_PAUSED
  SIM_COMPLETED
  SIM_FAILED
  SIM_ABANDONED
}

enum SimulationDifficulty {
  SIM_TUTORIAL
  SIM_EASY
  SIM_NORMAL
  SIM_HARD
  SIM_EXPERT
}

enum SimDecisionCategory {
  SIM_FINANCIAL
  SIM_OPERATIONS
  SIM_HR
  SIM_MARKETING
  SIM_COMPLIANCE
  SIM_GROWTH
  SIM_RISK
}

enum SimEventType {
  SIM_MARKET_CHANGE
  SIM_REGULATION_CHANGE
  SIM_ECONOMIC_SHOCK
  SIM_OPPORTUNITY
  SIM_CRISIS
  SIM_AUDIT
  SIM_CUSTOMER_EVENT
  SIM_EMPLOYEE_EVENT
  SIM_SUPPLIER_EVENT
  SIM_COMPETITION
}

enum SimEventSeverity {
  SEVERITY_LOW
  SEVERITY_MEDIUM
  SEVERITY_HIGH
  SEVERITY_CRITICAL
}

enum SimScenarioType {
  SCENARIO_FREEPLAY
  SCENARIO_TUTORIAL
  SCENARIO_CHALLENGE
  SCENARIO_CRISIS_SURVIVAL
  SCENARIO_GROWTH_RACE
  SCENARIO_COMPLIANCE_TEST
}
