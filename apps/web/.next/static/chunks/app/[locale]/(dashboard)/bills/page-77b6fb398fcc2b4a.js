(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3756],{96719:(e,a,r)=>{Promise.resolve().then(r.bind(r,47265))},47265:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>U});var t=r(95155),s=r(12115),l=r(39124),i=r(66889),n=r(26336),d=r(61594),o=r(86878),c=r(38684),u=r(33473),g=r(739),x=r(20853),m=r(84267),y=r(44857),h=r(9110),p=r(92598),b=r(26764),v=r(51055),j=r(25683),N=r(40767),f=r(14081),k=r(16233),w=r(60719),C=r(45686),D=r(32162);let A=()=>Math.random().toString(36).substr(2,9),S=()=>({id:A(),description:"",quantity:1,unit:"buc",unitPrice:0,vatRate:19,total:0}),P=e=>e.toISOString().split("T")[0],R=[{value:19,label:"19% (Standard)"},{value:9,label:"9% (Redus)"},{value:5,label:"5% (Redus)"},{value:0,label:"0% (Scutit)"}],O=[{value:"buc",label:"Bucăți (buc)"},{value:"kg",label:"Kilograme (kg)"},{value:"l",label:"Litri (l)"},{value:"m",label:"Metri (m)"},{value:"m\xb2",label:"Metri pătrați (m\xb2)"},{value:"h",label:"Ore (h)"},{value:"zi",label:"Zile"},{value:"luna",label:"Luni"}],z=[{value:"materiale",label:"Materiale și Consumabile"},{value:"servicii",label:"Servicii"},{value:"utilitati",label:"Utilități"},{value:"chirie",label:"Chirie"},{value:"transport",label:"Transport și Deplasări"},{value:"echipamente",label:"Echipamente și Dotări"},{value:"it",label:"IT și Software"},{value:"marketing",label:"Marketing și Publicitate"},{value:"consultanta",label:"Consultanță și Servicii Profesionale"},{value:"salarii",label:"Salarii și Contribuții"},{value:"asigurari",label:"Asigurări"},{value:"impozite",label:"Impozite și Taxe"},{value:"altele",label:"Altele"}],F=[{value:"transfer",label:"Transfer Bancar"},{value:"card",label:"Card"},{value:"numerar",label:"Numerar"},{value:"cec",label:"Cec"},{value:"bilet_ordin",label:"Bilet la Ordin"}];function I(e){let{isOpen:a,onClose:r,onSuccess:i,bill:n}=e,{selectedCompanyId:o}=(0,D.o)(),[x,m]=(0,s.useState)(!1),[y,p]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[A,I]=(0,s.useState)(null),E=[{id:"1",name:"Enel Energie",cui:"RO14399273",address:"București"},{id:"2",name:"Vodafone Romania",cui:"RO11574966",address:"București"},{id:"3",name:"Orange Romania",cui:"RO9010105",address:"București"},{id:"4",name:"Dedeman",cui:"RO4194681",address:"Bacău"},{id:"5",name:"EMAG",cui:"RO14399840",address:"București"}],[M,T]=(0,s.useState)({vendorId:"",vendorName:"",vendorCui:"",vendorAddress:"",invoiceNumber:"",issueDate:P(new Date),dueDate:P(new Date(Date.now()+2592e6)),receiptDate:P(new Date),currency:"RON",paymentStatus:"pending",paymentMethod:"",category:"",notes:"",attachmentUrl:"",items:[S()]});(0,s.useEffect)(()=>{a&&(n?(T(n),n.attachmentUrl&&I(n.attachmentUrl)):(T({vendorId:"",vendorName:"",vendorCui:"",vendorAddress:"",invoiceNumber:"",issueDate:P(new Date),dueDate:P(new Date(Date.now()+2592e6)),receiptDate:P(new Date),currency:"RON",paymentStatus:"pending",paymentMethod:"",category:"",notes:"",attachmentUrl:"",items:[S()]}),I(null)),p(!1))},[a,n]);let U=e=>e.quantity*e.unitPrice,{subtotal:L,vatAmount:V,total:B}=(()=>{let e=M.items.reduce((e,a)=>e+U(a),0),a=M.items.reduce((e,a)=>e+U(a)*a.vatRate/100,0);return{subtotal:e,vatAmount:a,total:e+a}})(),G=e=>{if("new"===e)p(!0),T(e=>({...e,vendorId:"",vendorName:"",vendorCui:"",vendorAddress:""}));else{p(!1);let a=E.find(a=>a.id===e);a&&T(e=>({...e,vendorId:a.id,vendorName:a.name,vendorCui:a.cui||"",vendorAddress:a.address||""}))}},_=(e,a)=>{T(r=>({...r,items:r.items.map((r,t)=>t===e?{...r,...a,total:U({...r,...a})}:r)}))},q=e=>{M.items.length>1&&T(a=>({...a,items:a.items.filter((a,r)=>r!==e)}))},Z=e=>{if(e&&e[0]){let a=e[0],r=new FileReader;r.onload=()=>{I(r.result),T(e=>({...e,attachmentUrl:r.result}))},r.readAsDataURL(a)}},J=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?v(!0):"dragleave"===e.type&&v(!1)},K=async e=>{if(e.preventDefault(),!M.vendorName){alert("Selectează sau adaugă un furnizor");return}if(!M.invoiceNumber){alert("Introdu numărul facturii");return}if(0===M.items.length||M.items.every(e=>!e.description)){alert("Adaugă cel puțin un articol pe factură");return}m(!0);try{await new Promise(e=>setTimeout(e,1e3)),console.log("Bill data:",{...M,companyId:o,totals:{subtotal:L,vatAmount:V,total:B}}),null==i||i(),r()}catch(e){console.error("Error creating bill:",e)}finally{m(!1)}},W=e=>new Intl.NumberFormat("ro-RO",{style:"currency",currency:M.currency}).format(e);return a?(0,t.jsx)(j.N,{children:(0,t.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,t.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,t.jsxs)(l.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-4xl bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n?"Editează Factura Primită":"Factură Primită Nouă"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"\xcenregistrează o factură de la un furnizor"})]}),(0,t.jsx)("button",{onClick:r,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:(0,t.jsx)(N.A,{className:"w-5 h-5"})})]}),(0,t.jsxs)("form",{onSubmit:K,children:[(0,t.jsxs)("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,t.jsx)(h.A,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("span",{children:"Detalii Furnizor"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nume Furnizor *"}),(0,t.jsx)("input",{type:"text",value:M.vendorName,onChange:e=>T(a=>({...a,vendorName:e.target.value})),placeholder:"SC Furnizor SRL",className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"CUI / CIF"}),(0,t.jsx)("input",{type:"text",value:M.vendorCui||"",onChange:e=>T(a=>({...a,vendorCui:e.target.value})),placeholder:"RO12345678",className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Adresă Furnizor"}),(0,t.jsx)("input",{type:"text",value:M.vendorAddress||"",onChange:e=>T(a=>({...a,vendorAddress:e.target.value})),placeholder:"Strada, Nr., Oraș",className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>p(!1),className:"text-sm text-orange-600 hover:underline",children:"← \xcenapoi la lista de furnizori"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Selectează Furnizor"}),(0,t.jsxs)("select",{value:M.vendorId,onChange:e=>G(e.target.value),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"",children:"-- Alege furnizor --"}),E.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," ",e.cui&&"(".concat(e.cui,")")]},e.id)),(0,t.jsx)("option",{value:"new",children:"+ Furnizor Nou"})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,t.jsx)(f.A,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("span",{children:"Detalii Factură"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Număr Factură *"}),(0,t.jsx)("input",{type:"text",value:M.invoiceNumber,onChange:e=>T(a=>({...a,invoiceNumber:e.target.value})),placeholder:"FV-001234",className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Emiterii"}),(0,t.jsx)("input",{type:"date",value:M.issueDate,onChange:e=>T(a=>({...a,issueDate:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Scadenței"}),(0,t.jsx)("input",{type:"date",value:M.dueDate,onChange:e=>T(a=>({...a,dueDate:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data Primirii"}),(0,t.jsx)("input",{type:"date",value:M.receiptDate,onChange:e=>T(a=>({...a,receiptDate:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categorie"}),(0,t.jsxs)("select",{value:M.category,onChange:e=>T(a=>({...a,category:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"",children:"-- Selectează --"}),z.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Monedă"}),(0,t.jsxs)("select",{value:M.currency,onChange:e=>T(a=>({...a,currency:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"RON",children:"RON - Leu rom\xe2nesc"}),(0,t.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,t.jsx)("option",{value:"USD",children:"USD - Dolar american"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,t.jsx)(k.A,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("span",{children:"Stare Plată"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status Plată"}),(0,t.jsxs)("select",{value:M.paymentStatus,onChange:e=>T(a=>({...a,paymentStatus:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"pending",children:"Neplătită"}),(0,t.jsx)("option",{value:"partial",children:"Plătită Parțial"}),(0,t.jsx)("option",{value:"paid",children:"Plătită Integral"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Metodă Plată"}),(0,t.jsxs)("select",{value:M.paymentMethod||"",onChange:e=>T(a=>({...a,paymentMethod:e.target.value})),className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"",children:"-- Selectează --"}),F.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,t.jsx)(w.A,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("span",{children:"Articole Factură"})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>{T(e=>({...e,items:[...e.items,S()]}))},className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm bg-orange-100 dark:bg-orange-900/30 text-orange-600 rounded-lg hover:bg-orange-200 dark:hover:bg-orange-900/50 transition-colors",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Adaugă Articol"]})]}),(0,t.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"hidden md:grid md:grid-cols-12 gap-2 px-4 py-3 bg-gray-50 dark:bg-gray-800 text-sm font-medium text-gray-500",children:[(0,t.jsx)("div",{className:"col-span-4",children:"Descriere"}),(0,t.jsx)("div",{className:"col-span-1",children:"Cant."}),(0,t.jsx)("div",{className:"col-span-2",children:"U.M."}),(0,t.jsx)("div",{className:"col-span-2",children:"Preț Unitar"}),(0,t.jsx)("div",{className:"col-span-1",children:"TVA"}),(0,t.jsx)("div",{className:"col-span-1 text-right",children:"Total"}),(0,t.jsx)("div",{className:"col-span-1"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.items.map((e,a)=>(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"hidden md:grid md:grid-cols-12 gap-2 items-center",children:[(0,t.jsx)("div",{className:"col-span-4",children:(0,t.jsx)("input",{type:"text",value:e.description,onChange:e=>_(a,{description:e.target.value}),placeholder:"Descriere produs/serviciu",className:"w-full px-2 py-1.5 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500"})}),(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.quantity,onChange:e=>_(a,{quantity:parseFloat(e.target.value)||0}),className:"w-full px-2 py-1.5 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500"})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("select",{value:e.unit,onChange:e=>_(a,{unit:e.target.value}),className:"w-full px-2 py-1.5 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",children:O.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.unitPrice,onChange:e=>_(a,{unitPrice:parseFloat(e.target.value)||0}),className:"w-full px-2 py-1.5 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500"})}),(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)("select",{value:e.vatRate,onChange:e=>_(a,{vatRate:parseInt(e.target.value)}),className:"w-full px-2 py-1.5 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-sm focus:outline-none focus:ring-1 focus:ring-orange-500",children:R.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.value,"%"]},e.value))})}),(0,t.jsx)("div",{className:"col-span-1 text-right font-medium",children:W(U(e))}),(0,t.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:()=>q(a),disabled:1===M.items.length,className:"p-1.5 text-gray-400 hover:text-red-500 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:(0,t.jsx)(C.A,{className:"w-4 h-4"})})})]}),(0,t.jsxs)("div",{className:"md:hidden space-y-3",children:[(0,t.jsx)("input",{type:"text",value:e.description,onChange:e=>_(a,{description:e.target.value}),placeholder:"Descriere produs/serviciu",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.quantity,onChange:e=>_(a,{quantity:parseFloat(e.target.value)||0}),placeholder:"Cant.",className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,t.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.unitPrice,onChange:e=>_(a,{unitPrice:parseFloat(e.target.value)||0}),placeholder:"Preț",className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium",children:W(U(e))}),(0,t.jsx)("button",{type:"button",onClick:()=>q(a),disabled:1===M.items.length,className:"p-1.5 text-gray-400 hover:text-red-500 disabled:opacity-30",children:(0,t.jsx)(C.A,{className:"w-4 h-4"})})]})]})]})]},e.id))})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("div",{className:"w-full md:w-72 space-y-2 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Subtotal:"}),(0,t.jsx)("span",{className:"font-medium",children:W(L)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"TVA Deductibil:"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:W(V)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2 mt-2",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsx)("span",{className:"text-orange-600",children:W(B)})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-lg font-medium",children:[(0,t.jsx)(c.A,{className:"w-5 h-5 text-orange-600"}),(0,t.jsx)("span",{children:"Atașament Factură"})]}),(0,t.jsx)("div",{onDragEnter:J,onDragLeave:J,onDragOver:J,onDrop:e=>{e.preventDefault(),e.stopPropagation(),v(!1),Z(e.dataTransfer.files)},className:"border-2 border-dashed rounded-xl p-6 text-center transition-colors ".concat(b?"border-orange-500 bg-orange-50 dark:bg-orange-900/20":"border-gray-300 dark:border-gray-600 hover:border-orange-400"),children:A?(0,t.jsxs)("div",{className:"space-y-3",children:[A.startsWith("data:image")?(0,t.jsx)("img",{src:A,alt:"Preview",className:"max-h-40 mx-auto rounded-lg"}):(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[(0,t.jsx)(f.A,{className:"w-8 h-8"}),(0,t.jsx)("span",{children:"Document atașat"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{I(null),T(e=>({...e,attachmentUrl:""}))},className:"text-sm text-red-500 hover:underline",children:"Șterge atașamentul"})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.A,{className:"w-10 h-10 mx-auto text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Trage și plasează factura aici sau"}),(0,t.jsxs)("label",{className:"cursor-pointer",children:[(0,t.jsx)("span",{className:"text-orange-600 hover:underline",children:"selectează un fișier"}),(0,t.jsx)("input",{type:"file",accept:"image/*,.pdf",onChange:e=>Z(e.target.files),className:"hidden"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"PDF, JPG, PNG (max. 10MB)"})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Note (opțional)"}),(0,t.jsx)("textarea",{value:M.notes||"",onChange:e=>T(a=>({...a,notes:e.target.value})),placeholder:"Note sau observații pentru această factură...",rows:3,className:"w-full px-3 py-2.5 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500 resize-none"})]}),"pending"===M.paymentStatus&&new Date(M.dueDate)<new Date&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:[(0,t.jsx)(d.A,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Această factură a depășit termenul de scadență!"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:"Anulează"}),(0,t.jsx)("button",{type:"submit",disabled:x||!M.vendorName||!M.invoiceNumber,className:"px-6 py-2.5 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Se salvează..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.A,{className:"w-4 h-4"}),n?"Salvează Modificări":"\xcenregistrează Factura"]})})]})]})]})})]})}):null}let E=[{id:"1",invoiceNumber:"FV-2024-0234",vendorName:"Enel Energie",vendorCui:"RO14399273",issueDate:"2024-11-15",dueDate:"2024-12-15",total:1250.5,vatAmount:199.5,currency:"RON",status:"pending",category:"utilitati"},{id:"2",invoiceNumber:"VDF-11-2024",vendorName:"Vodafone Romania",vendorCui:"RO11574966",issueDate:"2024-11-10",dueDate:"2024-12-10",total:450,vatAmount:71.85,currency:"RON",status:"paid",category:"servicii"},{id:"3",invoiceNumber:"DEDEMAN-78432",vendorName:"Dedeman",vendorCui:"RO4194681",issueDate:"2024-11-05",dueDate:"2024-11-20",total:3450,vatAmount:551.05,currency:"RON",status:"overdue",category:"materiale"},{id:"4",invoiceNumber:"EMAG-2024-98765",vendorName:"EMAG",vendorCui:"RO14399840",issueDate:"2024-11-20",dueDate:"2024-12-20",total:5999.99,vatAmount:957.98,currency:"RON",status:"pending",category:"echipamente"},{id:"5",invoiceNumber:"ORG-NOV-2024",vendorName:"Orange Romania",vendorCui:"RO9010105",issueDate:"2024-11-01",dueDate:"2024-11-30",total:289,vatAmount:46.15,currency:"RON",status:"paid",category:"servicii"}],M={pending:{label:"De Plată",color:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",icon:i.A},paid:{label:"Plătită",color:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",icon:n.A},overdue:{label:"Restantă",color:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",icon:d.A},partial:{label:"Plată Parțială",color:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",icon:o.A}},T={materiale:"Materiale",servicii:"Servicii",utilitati:"Utilități",chirie:"Chirie",transport:"Transport",echipamente:"Echipamente",it:"IT & Software",marketing:"Marketing",consultanta:"Consultanță",salarii:"Salarii",asigurari:"Asigurări",impozite:"Impozite",altele:"Altele"};function U(){let{selectedCompanyId:e}=(0,D.o)(),[a,r]=(0,s.useState)(!1),[n,j]=(0,s.useState)(""),[N,f]=(0,s.useState)("all"),[k,w]=(0,s.useState)(null),C={totalPending:E.filter(e=>"pending"===e.status).reduce((e,a)=>e+a.total,0),totalOverdue:E.filter(e=>"overdue"===e.status).reduce((e,a)=>e+a.total,0),totalVatDeductible:E.filter(e=>"paid"!==e.status).reduce((e,a)=>e+a.vatAmount,0),countPending:E.filter(e=>"pending"===e.status).length,countOverdue:E.filter(e=>"overdue"===e.status).length},A=E.filter(e=>{let a=e.invoiceNumber.toLowerCase().includes(n.toLowerCase())||e.vendorName.toLowerCase().includes(n.toLowerCase()),r="all"===N||e.status===N;return a&&r}),S=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RON";return new Intl.NumberFormat("ro-RO",{style:"currency",currency:a}).format(e)},P=e=>new Date(e).toLocaleDateString("ro-RO",{day:"numeric",month:"short",year:"numeric"});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Facturi Primite"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Gestionează facturile de la furnizori"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("button",{className:"inline-flex items-center gap-2 px-4 py-2.5 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),"Import e-Factura"]}),(0,t.jsxs)("button",{onClick:()=>r(!0),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-colors shadow-lg shadow-orange-600/25",children:[(0,t.jsx)(u.A,{className:"w-4 h-4"}),"Adaugă Factură"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-5 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"De Plată"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:S(C.totalPending)}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[C.countPending," facturi"]})]}),(0,t.jsx)("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl",children:(0,t.jsx)(i.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})})]})}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-5 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restante"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-red-600 mt-1",children:S(C.totalOverdue)}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[C.countOverdue," facturi"]})]}),(0,t.jsx)("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-xl",children:(0,t.jsx)(d.A,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-5 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"TVA Deductibil"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-1",children:S(C.totalVatDeductible)}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Pentru recuperat"})]}),(0,t.jsx)("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-xl",children:(0,t.jsx)(o.A,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),(0,t.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-5 bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Facturi"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:E.length}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Luna aceasta"})]}),(0,t.jsx)("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-xl",children:(0,t.jsx)(g.A,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(x.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Caută după număr factură sau furnizor...",value:n,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"px-4 py-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,t.jsx)("option",{value:"all",children:"Toate Statusurile"}),(0,t.jsx)("option",{value:"pending",children:"De Plată"}),(0,t.jsx)("option",{value:"paid",children:"Plătite"}),(0,t.jsx)("option",{value:"overdue",children:"Restante"})]}),(0,t.jsx)("button",{className:"p-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,t.jsx)(m.A,{className:"w-5 h-5 text-gray-500"})}),(0,t.jsx)("button",{className:"p-2.5 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:(0,t.jsx)(y.A,{className:"w-5 h-5 text-gray-500"})})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden",children:[(0,t.jsxs)("div",{className:"hidden lg:grid lg:grid-cols-12 gap-4 px-6 py-4 bg-gray-50 dark:bg-gray-900 text-sm font-medium text-gray-500",children:[(0,t.jsx)("div",{className:"col-span-3",children:"Furnizor / Nr. Factură"}),(0,t.jsx)("div",{className:"col-span-2",children:"Categorie"}),(0,t.jsx)("div",{className:"col-span-2",children:"Data Emiterii"}),(0,t.jsx)("div",{className:"col-span-2",children:"Scadență"}),(0,t.jsx)("div",{className:"col-span-1 text-right",children:"Total"}),(0,t.jsx)("div",{className:"col-span-1 text-center",children:"Status"}),(0,t.jsx)("div",{className:"col-span-1"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:0===A.length?(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)(g.A,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Nu există facturi care să corespundă criteriilor"})]}):A.map((e,a)=>{let r=M[e.status].icon;return(0,t.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,t.jsxs)("div",{className:"hidden lg:grid lg:grid-cols-12 gap-4 items-center",children:[(0,t.jsx)("div",{className:"col-span-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.vendorName}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.invoiceNumber})]})]})}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("span",{className:"px-2.5 py-1 bg-gray-100 dark:bg-gray-700 rounded-lg text-sm text-gray-600 dark:text-gray-300",children:T[e.category]||e.category})}),(0,t.jsx)("div",{className:"col-span-2 text-gray-600 dark:text-gray-300",children:P(e.issueDate)}),(0,t.jsx)("div",{className:"col-span-2",children:(0,t.jsx)("span",{className:"overdue"===e.status?"text-red-600 font-medium":"text-gray-600 dark:text-gray-300",children:P(e.dueDate)})}),(0,t.jsxs)("div",{className:"col-span-1 text-right",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:S(e.total,e.currency)}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["TVA: ",S(e.vatAmount,e.currency)]})]}),(0,t.jsx)("div",{className:"col-span-1 flex justify-center",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ".concat(M[e.status].color),children:[(0,t.jsx)(r,{className:"w-3.5 h-3.5"}),M[e.status].label]})}),(0,t.jsxs)("div",{className:"col-span-1 flex justify-end gap-1",children:[(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,t.jsx)(p.A,{className:"w-4 h-4 text-gray-400"})}),(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,t.jsx)(b.A,{className:"w-4 h-4 text-gray-400"})}),(0,t.jsx)("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:(0,t.jsx)(v.A,{className:"w-4 h-4 text-gray-400"})})]})]}),(0,t.jsxs)("div",{className:"lg:hidden space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:(0,t.jsx)(h.A,{className:"w-5 h-5 text-orange-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.vendorName}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.invoiceNumber})]})]}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-medium ".concat(M[e.status].color),children:[(0,t.jsx)(r,{className:"w-3.5 h-3.5"}),M[e.status].label]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-700",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Scadență: "}),(0,t.jsx)("span",{className:"overdue"===e.status?"text-red-600":"",children:P(e.dueDate)})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white",children:S(e.total,e.currency)})})]})]})]},e.id)})})]}),(0,t.jsx)(I,{isOpen:a,onClose:()=>r(!1),onSuccess:()=>window.location.reload()})]})}},32162:(e,a,r)=>{"use strict";r.d(a,{o:()=>l});var t=r(83749),s=r(60709);let l=(0,t.vt)()((0,s.Zr)(e=>({selectedCompanyId:null,selectedCompany:null,companies:[],setSelectedCompanyId:a=>e({selectedCompanyId:a}),setSelectedCompany:a=>e({selectedCompany:a,selectedCompanyId:(null==a?void 0:a.id)||null}),setCompanies:a=>e({companies:a}),reset:()=>e({selectedCompanyId:null,selectedCompany:null,companies:[]})}),{name:"documentiulia-company",partialize:e=>({selectedCompanyId:e.selectedCompanyId})}))}},e=>{var a=a=>e(e.s=a);e.O(0,[4265,3937,8965,8441,1517,7358],()=>a(96719)),_N_E=e.O()}]);