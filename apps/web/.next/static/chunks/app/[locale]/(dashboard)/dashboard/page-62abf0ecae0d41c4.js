(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8598],{66354:(e,t,a)=>{Promise.resolve().then(a.bind(a,54270))},54270:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>K});var r=a(95155),s=a(7266),n=a(39124),i=a(14081),l=a(739),o=a(92823),c=a(61594),d=a(75340),x=a(26336),u=a(99053),m=a(86878),g=a(77607),p=a(66889),h=a(14505),y=a(35620),b=a(23950),v=a(13556),f=a(32162);function k(e){let{title:t,value:a,change:s,changeType:i="neutral",icon:l,color:o,delay:c,isLoading:d}=e;return(0,r.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c},className:"p-6 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t}),d?(0,r.jsx)("div",{className:"h-8 mt-1 flex items-center",children:(0,r.jsx)(h.A,{className:"w-5 h-5 animate-spin text-gray-400"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-2xl font-bold mt-1",children:a}),s&&(0,r.jsxs)("div",{className:"flex items-center gap-1 mt-2",children:["positive"===i?(0,r.jsx)(m.A,{className:"w-4 h-4 text-green-500"}):"negative"===i?(0,r.jsx)(g.A,{className:"w-4 h-4 text-red-500"}):null,(0,r.jsx)("span",{className:"text-sm font-medium ".concat("positive"===i?"text-green-600 dark:text-green-400":"negative"===i?"text-red-600 dark:text-red-400":"text-gray-500"),children:s}),(0,r.jsx)("span",{className:"text-sm text-gray-400",children:"vs luna trecută"})]})]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-xl ".concat(o," flex items-center justify-center"),children:(0,r.jsx)(l,{className:"w-6 h-6"})})]})})}function j(e){return new Intl.NumberFormat("ro-RO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" RON"}function N(e,t){if(0===t)return{change:"N/A",type:"neutral"};let a=(e-t)/t*100,r=a>=0?"+":"";return{change:"".concat(r).concat(a.toFixed(1),"%"),type:a>0?"positive":a<0?"negative":"neutral"}}function w(){var e,t,a,n,o,c,d,x,u,g,p,h,w,A,O,S;let D=(0,s.useTranslations)("dashboard.stats"),{selectedCompanyId:C}=(0,f.o)(),{data:R,isLoading:F,error:T}=(0,v.MZ)(C||""),I=[{title:D("revenue"),value:"0 RON",change:void 0,changeType:"neutral",icon:m.A,color:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",delay:0},{title:D("expenses"),value:"0 RON",change:void 0,changeType:"neutral",icon:l.A,color:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",delay:.05},{title:D("profit"),value:"0 RON",change:void 0,changeType:"neutral",icon:y.A,color:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",delay:.1},{title:D("outstanding"),value:"0 RON",change:"0 facturi",changeType:"neutral",icon:i.A,color:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",delay:.15},{title:D("overdue"),value:"0 RON",change:"0 facturi",changeType:"neutral",icon:b.A,color:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400",delay:.2},{title:D("vatDue"),value:"0 RON",change:void 0,changeType:"neutral",icon:l.A,color:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",delay:.25}],G=null==R?void 0:R.data,P=G?[{title:D("revenue"),value:j((null===(e=G.revenue)||void 0===e?void 0:e.current)||0),...N((null===(t=G.revenue)||void 0===t?void 0:t.current)||0,(null===(a=G.revenue)||void 0===a?void 0:a.previous)||0),icon:m.A,color:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",delay:0},{title:D("expenses"),value:j((null===(n=G.expenses)||void 0===n?void 0:n.current)||0),...N((null===(o=G.expenses)||void 0===o?void 0:o.current)||0,(null===(c=G.expenses)||void 0===c?void 0:c.previous)||0),icon:l.A,color:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",delay:.05},{title:D("profit"),value:j((null===(d=G.profit)||void 0===d?void 0:d.current)||0),...N((null===(x=G.profit)||void 0===x?void 0:x.current)||0,(null===(u=G.profit)||void 0===u?void 0:u.previous)||0),icon:y.A,color:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",delay:.1},{title:D("outstanding"),value:j((null===(g=G.outstanding)||void 0===g?void 0:g.amount)||0),change:"".concat((null===(p=G.outstanding)||void 0===p?void 0:p.count)||0," facturi"),changeType:"neutral",icon:i.A,color:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",delay:.15},{title:D("overdue"),value:j((null===(h=G.overdue)||void 0===h?void 0:h.amount)||0),change:"".concat((null===(w=G.overdue)||void 0===w?void 0:w.count)||0," facturi"),changeType:((null===(A=G.overdue)||void 0===A?void 0:A.count)||0)>0?"negative":"neutral",icon:b.A,color:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400",delay:.2},{title:D("vatDue"),value:j((null===(O=G.vatDue)||void 0===O?void 0:O.amount)||0),change:(null===(S=G.vatDue)||void 0===S?void 0:S.dueDate)?"Scadență: ".concat(new Date(G.vatDue.dueDate).toLocaleDateString("ro-RO",{day:"numeric",month:"short"})):void 0,changeType:"neutral",icon:l.A,color:"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400",delay:.25}]:I;return T&&C?(0,r.jsx)("div",{className:"p-6 rounded-2xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800",children:(0,r.jsx)("p",{className:"text-red-600 dark:text-red-400",children:"Eroare la \xeencărcarea datelor. \xcencercați din nou."})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:P.map(e=>(0,r.jsx)(k,{...e,isLoading:F&&!!C},e.title))})}var A=a(12115),O=a(58581),S=a(29844),D=a(15255),C=a(12800),R=a(66963),F=a(27112),T=a(86354),I=a(90518);let G=[{month:"Ian",income:42e3,expenses:18e3,forecast:null},{month:"Feb",income:38e3,expenses:22e3,forecast:null},{month:"Mar",income:51e3,expenses:19e3,forecast:null},{month:"Apr",income:47e3,expenses:24e3,forecast:null},{month:"Mai",income:53e3,expenses:21e3,forecast:null},{month:"Iun",income:49e3,expenses:23e3,forecast:null},{month:"Iul",income:55e3,expenses:25e3,forecast:null},{month:"Aug",income:48e3,expenses:22e3,forecast:null},{month:"Sep",income:52e3,expenses:24e3,forecast:null},{month:"Oct",income:58e3,expenses:26e3,forecast:null},{month:"Nov",income:45230,expenses:18450,forecast:null},{month:"Dec",income:null,expenses:null,forecast:52e3}],P=[{week:"Săpt 1",income:12e3,expenses:4500,forecast:null},{week:"Săpt 2",income:10500,expenses:5200,forecast:null},{week:"Săpt 3",income:14200,expenses:4800,forecast:null},{week:"Săpt 4",income:8530,expenses:3950,forecast:null},{week:"Săpt 5",income:null,expenses:null,forecast:11e3}],L=["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"];function z(e){let{active:t,payload:a,label:s}=e;return t&&a?(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("p",{className:"font-medium mb-2",children:s}),a.map((e,t)=>{var a;return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("span",{className:"text-gray-600 dark:text-gray-400",children:["income"===e.dataKey?"Venituri":"expenses"===e.dataKey?"Cheltuieli":"Prognoză",":"]}),(0,r.jsxs)("span",{className:"font-semibold",children:[null===(a=e.value)||void 0===a?void 0:a.toLocaleString("ro-RO")," RON"]})]},t)})]}):null}function E(e){return new Intl.NumberFormat("ro-RO",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" RON"}function M(){let e=(0,s.useTranslations)("dashboard.charts"),[t,a]=(0,A.useState)("month"),{selectedCompanyId:i}=(0,f.o)(),l=new Date().getFullYear(),{data:o,isLoading:c}=(0,v.ok)(i||"","year"===t?{year:l.toString()}:"month"===t?{year:l.toString(),groupBy:"month"}:{year:l.toString(),groupBy:"week"}),d=(0,A.useMemo)(()=>{let e=null==o?void 0:o.data;if(!(null==e?void 0:e.periods))return"week"===t?P:G;let a=e.periods;return"month"===t?a.map(e=>({month:L[e.month-1]||"".concat(e.month),income:e.income||0,expenses:e.expenses||0,forecast:null})):"week"===t?a.map((e,t)=>({week:"Săpt ".concat(e.week||t+1),income:e.income||0,expenses:e.expenses||0,forecast:null})):G},[o,t]),x=(0,A.useMemo)(()=>{let e=null==o?void 0:o.data;if(null==e?void 0:e.totals)return{totalIncome:e.totals.income||0,totalExpenses:e.totals.expenses||0,profit:e.totals.profit||0};let t=d.reduce((e,t)=>e+(t.income||0),0),a=d.reduce((e,t)=>e+(t.expenses||0),0);return{totalIncome:t,totalExpenses:a,profit:t-a}},[o,d]),u="week"===t?"week":"month";return(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"p-6 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-lg",children:e("cashFlow")}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("revenueVsExpenses")})]}),(0,r.jsx)("div",{className:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-700 rounded-lg",children:["week","month","year"].map(e=>(0,r.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(t===e?"bg-white dark:bg-gray-600 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:"week"===e?"Săptăm\xe2nal":"month"===e?"Lunar":"Anual"},e))})]}),(0,r.jsxs)("div",{className:"h-80 relative",children:[c&&i&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 dark:bg-gray-800/50 z-10",children:(0,r.jsx)(h.A,{className:"w-8 h-8 animate-spin text-blue-600"})}),(0,r.jsx)(O.u,{width:"100%",height:"100%",children:(0,r.jsxs)(S.Q,{data:d,margin:{top:10,right:10,left:0,bottom:0},children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"incomeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"expensesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:0})]}),(0,r.jsxs)("linearGradient",{id:"forecastGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,r.jsx)("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),(0,r.jsx)("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),(0,r.jsx)(D.d,{strokeDasharray:"3 3",stroke:"#e5e7eb",className:"dark:stroke-gray-700",vertical:!1}),(0,r.jsx)(C.W,{dataKey:u,axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},dy:10}),(0,r.jsx)(R.h,{axisLine:!1,tickLine:!1,tick:{fill:"#9ca3af",fontSize:12},tickFormatter:e=>"".concat((e/1e3).toFixed(0),"k"),dx:-10}),(0,r.jsx)(F.m,{content:(0,r.jsx)(z,{})}),(0,r.jsx)(T.s,{verticalAlign:"top",align:"right",iconType:"circle",iconSize:8,formatter:e=>"income"===e?"Venituri":"expenses"===e?"Cheltuieli":"Prognoză AI"}),(0,r.jsx)(I.G,{type:"monotone",dataKey:"income",stroke:"#22c55e",strokeWidth:2,fill:"url(#incomeGradient)",dot:!1,activeDot:{r:6,strokeWidth:2,fill:"#fff"}}),(0,r.jsx)(I.G,{type:"monotone",dataKey:"expenses",stroke:"#f97316",strokeWidth:2,fill:"url(#expensesGradient)",dot:!1,activeDot:{r:6,strokeWidth:2,fill:"#fff"}}),(0,r.jsx)(I.G,{type:"monotone",dataKey:"forecast",stroke:"#3b82f6",strokeWidth:2,strokeDasharray:"5 5",fill:"url(#forecastGradient)",dot:!1,activeDot:{r:6,strokeWidth:2,fill:"#fff"}})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Venituri"}),(0,r.jsx)("p",{className:"text-xl font-bold text-green-600",children:E(x.totalIncome)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Cheltuieli"}),(0,r.jsx)("p",{className:"text-xl font-bold text-orange-600",children:E(x.totalExpenses)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Profit Net"}),(0,r.jsx)("p",{className:"text-xl font-bold text-blue-600",children:E(x.profit)})]})]})]})}let W={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4}};function K(){let e=(0,s.useTranslations)(),t=[{label:"Factură Nouă",href:"/invoices/new",icon:i.A,color:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"},{label:"Cheltuială Nouă",href:"/expenses/new",icon:l.A,color:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400"},{label:"Contact Nou",href:"/contacts/new",icon:o.A,color:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400"}],a=[{type:"warning",message:"Termen TVA \xeen 5 zile",icon:c.A,color:"text-amber-600 bg-amber-50 dark:bg-amber-900/20"},{type:"error",message:"3 facturi restante",icon:d.A,color:"text-red-600 bg-red-50 dark:bg-red-900/20"},{type:"info",message:"e-Factura nouă primită",icon:x.A,color:"text-blue-600 bg-blue-50 dark:bg-blue-900/20"}];return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)(n.P.div,{...W,children:[(0,r.jsxs)("h1",{className:"text-2xl sm:text-3xl font-bold",children:[e("dashboard.welcome"),", Alexandru \uD83D\uDC4B"]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Iată un rezumat al activității din această lună."})]}),(0,r.jsx)(w,{}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsx)(M,{})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"p-6 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"font-semibold mb-4",children:e("dashboard.quickActions")}),(0,r.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("a",{href:e.href,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-lg ".concat(e.color," flex items-center justify-center"),children:(0,r.jsx)(e.icon,{className:"w-5 h-5"})}),(0,r.jsx)("span",{className:"font-medium",children:e.label}),(0,r.jsx)(u.A,{className:"w-4 h-4 ml-auto text-gray-400 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})]},e.href))})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"p-6 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h2",{className:"font-semibold mb-4",children:e("dashboard.alerts.title")}),(0,r.jsx)("div",{className:"space-y-3",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl ".concat(e.color),children:[(0,r.jsx)(e.icon,{className:"w-5 h-5 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.message})]},t))})]})]})]}),(0,r.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"p-6 rounded-2xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"font-semibold",children:e("dashboard.recentActivity")}),(0,r.jsx)("a",{href:"/activity",className:"text-sm text-primary hover:text-primary/80 transition-colors",children:"Vezi tot"})]}),(0,r.jsx)("div",{className:"space-y-4",children:[{type:"invoice",title:"Factură #2024-0156 trimisă",client:"SC Example SRL",amount:"2,500.00 RON",time:"Acum 2 ore",status:"sent"},{type:"payment",title:"Plată primită",client:"SC Client SRL",amount:"1,800.00 RON",time:"Acum 4 ore",status:"success"},{type:"expense",title:"Cheltuială \xeenregistrată",client:"Birou",amount:"450.00 RON",time:"Ieri",status:"pending"},{type:"efactura",title:"e-Factura validată ANAF",client:"SC Partner SRL",amount:"3,200.00 RON",time:"Ieri",status:"success"}].map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[(0,r.jsxs)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat("success"===e.status?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"pending"===e.status?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"),children:["invoice"===e.type&&(0,r.jsx)(i.A,{className:"w-5 h-5"}),"payment"===e.type&&(0,r.jsx)(m.A,{className:"w-5 h-5"}),"expense"===e.type&&(0,r.jsx)(g.A,{className:"w-5 h-5"}),"efactura"===e.type&&(0,r.jsx)(x.A,{className:"w-5 h-5"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium truncate",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.client})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-semibold",children:e.amount}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center justify-end gap-1",children:[(0,r.jsx)(p.A,{className:"w-3 h-3"}),e.time]})]})]},t))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4265,3937,7266,8239,8451,7520,3139,8441,1517,7358],()=>t(66354)),_N_E=e.O()}]);