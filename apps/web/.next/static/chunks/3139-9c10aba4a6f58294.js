"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3139],{13556:(e,t,s)=>{s.d(t,{aq:()=>m,UT:()=>b,Jz:()=>q,MZ:()=>v,Rl:()=>O,Vb:()=>T,Fk:()=>f,sv:()=>S,VU:()=>k,CV:()=>l,WI:()=>y,YF:()=>h,QT:()=>d,h1:()=>g,ok:()=>w,YG:()=>U,sy:()=>p,bX:()=>P});var n=s(39556),a=s(35906),c=s(25848);class o{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{token:s,companyId:n,...a}=t,c={...this.defaultHeaders,...a.headers||{}};s&&(c.Authorization="Bearer ".concat(s)),n&&(c["x-company-id"]=n);try{let t=await fetch("".concat(this.baseUrl).concat(e),{...a,headers:c}),s=await t.json();if(!t.ok)return{error:s.message||"An error occurred",statusCode:t.status};return{data:s}}catch(e){return{error:e instanceof Error?e.message:"Network error",statusCode:500}}}constructor(e="/api/v2"){this.auth={me:e=>this.request("/auth/me",{token:e})},this.users={me:e=>this.request("/users/me",{token:e}),myCompanies:e=>this.request("/users/me/companies",{token:e}),update:(e,t)=>this.request("/users/me",{method:"PUT",token:e,body:JSON.stringify(t)})},this.companies={list:e=>this.request("/companies",{token:e}),get:(e,t)=>this.request("/companies/".concat(t),{token:e}),create:(e,t)=>this.request("/companies",{method:"POST",token:e,body:JSON.stringify(t)}),update:(e,t,s)=>this.request("/companies/".concat(t),{method:"PUT",token:e,body:JSON.stringify(s)}),delete:(e,t)=>this.request("/companies/".concat(t),{method:"DELETE",token:e}),stats:(e,t)=>this.request("/companies/".concat(t,"/stats"),{token:e}),members:(e,t)=>this.request("/companies/".concat(t,"/members"),{token:e})},this.clients={list:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/clients").concat(n),{token:e})},get:(e,t,s)=>this.request("/companies/".concat(t,"/clients/").concat(s),{token:e}),create:(e,t,s)=>this.request("/companies/".concat(t,"/clients"),{method:"POST",token:e,body:JSON.stringify(s)}),update:(e,t,s,n)=>this.request("/companies/".concat(t,"/clients/").concat(s),{method:"PUT",token:e,body:JSON.stringify(n)}),delete:(e,t,s)=>this.request("/companies/".concat(t,"/clients/").concat(s),{method:"DELETE",token:e}),stats:(e,t,s)=>this.request("/companies/".concat(t,"/clients/").concat(s,"/stats"),{token:e})},this.products={list:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/products").concat(n),{token:e})},get:(e,t,s)=>this.request("/companies/".concat(t,"/products/").concat(s),{token:e}),create:(e,t,s)=>this.request("/companies/".concat(t,"/products"),{method:"POST",token:e,body:JSON.stringify(s)}),update:(e,t,s,n)=>this.request("/companies/".concat(t,"/products/").concat(s),{method:"PUT",token:e,body:JSON.stringify(n)}),delete:(e,t,s)=>this.request("/companies/".concat(t,"/products/").concat(s),{method:"DELETE",token:e}),lowStock:(e,t)=>this.request("/companies/".concat(t,"/products/low-stock"),{token:e})},this.invoices={list:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/invoices".concat(n),{token:e,companyId:t})},get:(e,t,s)=>this.request("/invoices/".concat(s),{token:e,companyId:t}),create:(e,t,s)=>this.request("/invoices",{method:"POST",token:e,companyId:t,body:JSON.stringify(s)}),update:(e,t,s,n)=>this.request("/invoices/".concat(s),{method:"PUT",token:e,companyId:t,body:JSON.stringify(n)}),delete:(e,t,s)=>this.request("/invoices/".concat(s),{method:"DELETE",token:e,companyId:t}),send:(e,t,s)=>this.request("/invoices/".concat(s,"/send"),{method:"POST",token:e,companyId:t}),pay:(e,t,s,n)=>this.request("/invoices/".concat(s,"/pay"),{method:"POST",token:e,companyId:t,body:JSON.stringify(n)}),stats:(e,t)=>this.request("/invoices/stats",{token:e,companyId:t})},this.expenses={list:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/expenses").concat(n),{token:e})},get:(e,t,s)=>this.request("/companies/".concat(t,"/expenses/").concat(s),{token:e}),create:(e,t,s)=>this.request("/companies/".concat(t,"/expenses"),{method:"POST",token:e,body:JSON.stringify(s)}),update:(e,t,s,n)=>this.request("/companies/".concat(t,"/expenses/").concat(s),{method:"PUT",token:e,body:JSON.stringify(n)}),delete:(e,t,s)=>this.request("/companies/".concat(t,"/expenses/").concat(s),{method:"DELETE",token:e}),markPaid:(e,t,s,n)=>this.request("/companies/".concat(t,"/expenses/").concat(s,"/mark-paid"),{method:"PUT",token:e,body:JSON.stringify(n)}),unpaid:(e,t)=>this.request("/companies/".concat(t,"/expenses/unpaid"),{token:e}),byCategory:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/expenses/by-category").concat(n),{token:e})},monthlyTotals:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/expenses/monthly-totals").concat(n),{token:e})}},this.reports={dashboard:(e,t)=>this.request("/companies/".concat(t,"/reports/dashboard"),{token:e}),revenue:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/reports/revenue").concat(n),{token:e})},expenses:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/reports/expenses").concat(n),{token:e})},profitLoss:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/reports/profit-loss").concat(n),{token:e})},vat:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/reports/vat").concat(n),{token:e})},cashflow:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/reports/cashflow").concat(n),{token:e})}},this.efactura={config:(e,t)=>this.request("/companies/".concat(t,"/efactura/config"),{token:e}),saveConfig:(e,t,s)=>this.request("/companies/".concat(t,"/efactura/config"),{method:"POST",token:e,body:JSON.stringify(s)}),validate:(e,t,s)=>this.request("/companies/".concat(t,"/efactura/validate"),{method:"POST",token:e,body:JSON.stringify({invoiceId:s})}),generateXml:(e,t,s)=>this.request("/companies/".concat(t,"/efactura/generate-xml"),{method:"POST",token:e,body:JSON.stringify({invoiceId:s})}),submit:(e,t,s)=>this.request("/companies/".concat(t,"/efactura/submit"),{method:"POST",token:e,body:JSON.stringify({invoiceId:s})}),status:(e,t)=>this.request("/companies/".concat(t,"/efactura/status"),{token:e}),history:(e,t)=>this.request("/companies/".concat(t,"/efactura/history"),{token:e})},this.saft={generate:(e,t,s)=>this.request("/companies/".concat(t,"/saft/generate"),{method:"POST",token:e,body:JSON.stringify(s)}),validate:(e,t,s)=>this.request("/companies/".concat(t,"/saft/validate"),{method:"POST",token:e,body:JSON.stringify(s)}),preview:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/saft/preview").concat(n),{token:e})},history:(e,t)=>this.request("/companies/".concat(t,"/saft/history"),{token:e}),download:(e,t,s)=>this.request("/companies/".concat(t,"/saft/download/").concat(s),{token:e})},this.receipts={list:(e,t,s)=>{let n=s?"?".concat(new URLSearchParams(s)):"";return this.request("/companies/".concat(t,"/receipts").concat(n),{token:e})},get:(e,t,s)=>this.request("/companies/".concat(t,"/receipts/").concat(s),{token:e}),upload:async(e,t,s)=>{let n=new FormData;return n.append("file",s),(await fetch("".concat(this.baseUrl,"/companies/").concat(t,"/receipts/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:n})).json()},updateOcr:(e,t,s,n)=>this.request("/companies/".concat(t,"/receipts/").concat(s,"/ocr"),{method:"PUT",token:e,body:JSON.stringify(n)}),linkExpense:(e,t,s,n)=>this.request("/companies/".concat(t,"/receipts/").concat(s,"/link-expense"),{method:"POST",token:e,body:JSON.stringify({expenseId:n})}),createExpense:(e,t,s,n)=>this.request("/companies/".concat(t,"/receipts/").concat(s,"/create-expense"),{method:"POST",token:e,body:JSON.stringify(n)}),reprocess:(e,t,s)=>this.request("/companies/".concat(t,"/receipts/").concat(s,"/reprocess"),{method:"POST",token:e}),unprocessed:(e,t)=>this.request("/companies/".concat(t,"/receipts/unprocessed"),{token:e}),needsReview:(e,t)=>this.request("/companies/".concat(t,"/receipts/needs-review"),{token:e})},this.bankAccounts={list:(e,t)=>this.request("/companies/".concat(t,"/bank-accounts"),{token:e}),get:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts/").concat(s),{token:e}),create:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts"),{method:"POST",token:e,body:JSON.stringify(s)}),update:(e,t,s,n)=>this.request("/companies/".concat(t,"/bank-accounts/").concat(s),{method:"PUT",token:e,body:JSON.stringify(n)}),delete:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts/").concat(s),{method:"DELETE",token:e}),setDefault:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts/").concat(s,"/set-default"),{method:"PUT",token:e}),transactions:(e,t,s,n)=>{let a=n?"?".concat(new URLSearchParams(n)):"";return this.request("/companies/".concat(t,"/bank-accounts/").concat(s,"/transactions").concat(a),{token:e})},sync:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts/").concat(s,"/sync"),{method:"POST",token:e}),connect:(e,t,s)=>this.request("/companies/".concat(t,"/bank-accounts/connect"),{method:"POST",token:e,body:JSON.stringify(s)})},this.notifications={list:e=>this.request("/notifications",{token:e}),markRead:(e,t)=>this.request("/notifications/".concat(t,"/read"),{method:"PUT",token:e}),markAllRead:e=>this.request("/notifications/read-all",{method:"PUT",token:e})},this.activity={list:(e,t)=>{let s=t?"?".concat(new URLSearchParams(t)):"";return this.request("/activity".concat(s),{token:e})},recent:(e,t)=>this.request("/activity/recent".concat(t?"?limit=".concat(t):""),{token:e}),stats:(e,t)=>{let s=t?"?".concat(new URLSearchParams(t)):"";return this.request("/activity/stats".concat(s),{token:e})},me:(e,t)=>this.request("/activity/me".concat(t?"?limit=".concat(t):""),{token:e}),byEntity:(e,t,s)=>this.request("/activity/entity/".concat(t,"/").concat(s),{token:e})},this.baseUrl=e,this.defaultHeaders={"Content-Type":"application/json"}}}let r=new o,i={userCompanies:["user","companies"],clients:e=>["companies",e,"clients"],products:e=>["companies",e,"products"],lowStock:e=>["companies",e,"products","low-stock"],invoices:e=>["companies",e,"invoices"],invoiceStats:e=>["companies",e,"invoices","stats"],expenses:e=>["companies",e,"expenses"],unpaidExpenses:e=>["companies",e,"expenses","unpaid"],expensesByCategory:e=>["companies",e,"expenses","by-category"],dashboard:e=>["companies",e,"reports","dashboard"],revenue:e=>["companies",e,"reports","revenue"],profitLoss:e=>["companies",e,"reports","profit-loss"],vatReport:e=>["companies",e,"reports","vat"],efacturaConfig:e=>["companies",e,"efactura","config"],efacturaStatus:e=>["companies",e,"efactura","status"],saftHistory:e=>["companies",e,"saft","history"]};function u(){return async()=>"dev_test_token"}function p(){let e=u();return(0,n.I)({queryKey:i.userCompanies,queryFn:async()=>{let t=await e();return r.users.myCompanies(t)}})}function m(e,t){let s=u();return(0,n.I)({queryKey:[...i.clients(e),t],queryFn:async()=>{let n=await s();return r.clients.list(n,e,t)},enabled:!!e})}function d(e,t){let s=u();return(0,n.I)({queryKey:[...i.products(e),t],queryFn:async()=>{let n=await s();return r.products.list(n,e,t)},enabled:!!e})}function h(e){let t=u();return(0,n.I)({queryKey:i.lowStock(e),queryFn:async()=>{let s=await t();return r.products.lowStock(s,e)},enabled:!!e})}function y(e,t){let s=u();return(0,n.I)({queryKey:[...i.invoices(e),t],queryFn:async()=>{let n=await s();return r.invoices.list(n,e,t)},enabled:!!e})}function l(e){let t=u();return(0,n.I)({queryKey:i.invoiceStats(e),queryFn:async()=>{let s=await t();return r.invoices.stats(s,e)},enabled:!!e})}function q(e){let t=(0,a.jE)(),s=u();return(0,c.n)({mutationFn:async t=>{let n=await s();return r.invoices.create(n,e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:i.invoices(e)}),t.invalidateQueries({queryKey:i.invoiceStats(e)})}})}function f(e,t){let s=u();return(0,n.I)({queryKey:[...i.expenses(e),t],queryFn:async()=>{let n=await s();return r.expenses.list(n,e,t)},enabled:!!e})}function S(e,t){let s=u();return(0,n.I)({queryKey:[...i.expensesByCategory(e),t],queryFn:async()=>{let n=await s();return r.expenses.byCategory(n,e,t)},enabled:!!e})}function b(e){let t=(0,a.jE)(),s=u();return(0,c.n)({mutationFn:async t=>{let n=await s();return r.expenses.create(n,e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:i.expenses(e)}),t.invalidateQueries({queryKey:i.unpaidExpenses(e)})}})}function v(e){let t=u();return(0,n.I)({queryKey:i.dashboard(e),queryFn:async()=>{let s=await t();return r.reports.dashboard(s,e)},enabled:!!e})}function w(e,t){let s=u();return(0,n.I)({queryKey:[...i.revenue(e),t],queryFn:async()=>{let n=await s();return r.reports.revenue(n,e,t)},enabled:!!e})}function g(e,t){let s=u();return(0,n.I)({queryKey:[...i.profitLoss(e),t],queryFn:async()=>{let n=await s();return r.reports.profitLoss(n,e,t)},enabled:!!e})}function P(e,t){let s=u();return(0,n.I)({queryKey:[...i.vatReport(e),t],queryFn:async()=>{let n=await s();return r.reports.vat(n,e,t)},enabled:!!e})}function O(e){let t=u();return(0,n.I)({queryKey:i.efacturaConfig(e),queryFn:async()=>{let s=await t();return r.efactura.config(s,e)},enabled:!!e})}function T(e){let t=u();return(0,n.I)({queryKey:i.efacturaStatus(e),queryFn:async()=>{let s=await t();return r.efactura.status(s,e)},enabled:!!e})}function U(e){let t=u();return(0,n.I)({queryKey:i.saftHistory(e),queryFn:async()=>{let s=await t();return r.saft.history(s,e)},enabled:!!e})}function k(e){let t=(0,a.jE)(),s=u();return(0,c.n)({mutationFn:async t=>{let n=await s();return r.saft.generate(n,e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:i.saftHistory(e)})}})}},32162:(e,t,s)=>{s.d(t,{o:()=>c});var n=s(83749),a=s(60709);let c=(0,n.vt)()((0,a.Zr)(e=>({selectedCompanyId:null,selectedCompany:null,companies:[],setSelectedCompanyId:t=>e({selectedCompanyId:t}),setSelectedCompany:t=>e({selectedCompany:t,selectedCompanyId:(null==t?void 0:t.id)||null}),setCompanies:t=>e({companies:t}),reset:()=>e({selectedCompanyId:null,selectedCompany:null,companies:[]})}),{name:"documentiulia-company",partialize:e=>({selectedCompanyId:e.selectedCompanyId})}))}}]);